<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="Author" content="OpenTutorials">
	<meta http-equiv="x-ua-compatible" content="IE=EDGE">
	<meta name="viewport" content="width=1280">
	<title>인증 번호 생성 2/2 - 평범한 개발자의 C 프로그래밍 이야기</title>
    <link rel="apple-touch-icon" sizes="57x57" href="/static/img/common/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/img/common/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/img/common/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/img/common/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/img/common/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/img/common/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/img/common/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/img/common/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/img/common/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/static/img/common/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/img/common/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/img/common/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/img/common/favicon/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/static/img/common/favicon/apple-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

	<link rel="icon" href="/static/img/common/favicon/favicon-32x32.png" type="image/x-icon">
	<meta property="og:title" content="인증 번호 생성 2/2 - 평범한 개발자의 C 프로그래밍 이야기">
	<meta property="og:type" content="university">
	<meta property="og:url" content="http://opentutorials.org/module/1329/8585">
	<meta property="og:image" content="">
	<meta property="og:site_name" content="평범한 개발자의 C 프로그래밍 이야기">
	<meta property="fb:admins" content="1015740740">
	<!--[if lt IE 9]>
	<script>
		document.createElement('header');
		document.createElement('nav');
		document.createElement('section');
		document.createElement('article');
		document.createElement('aside');
		document.createElement('footer');
		document.createElement('hgroup');
	</script>
	<![endif]-->
	<script type="text/javascript">
		var outpath = '/admin/module_topic_edit/1329/8585';
		var path_context = 'module/1329';
		var user_id = 9992;
		var topic_id = 8585;
		var base_url = "http://opentutorials.org/";
		var file_url = "/static/";
		var user_file_url = "https://s3-ap-northeast-1.amazonaws.com/opentutorialsfile/";
		var hash = window.location.hash == undefined ? '' : window.location.hash.substr(1);
		var cmt_paging_unit = 50;
		var autosave_interval = 1;
		var CKEDITOR_BASEPATH = base_url + 'static/js/common/ckeditor/';
	</script>
<link href="/static/css/common/reset.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/common/tipTip.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/common.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/menus.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/style.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/content.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/everystudy.css?1" rel="stylesheet" type="text/css" media="all" />
<script src="/static/js/common/jquery/jquery-1.8.3.custom.min.js?1"></script>
<script src="/static/js/common/jquery.ui/1.9.2/js/jquery-ui-1.9.2.custom.min.js?1"></script>
<script src="/static/js/common/jquery.browser.min.js?1"></script>
<script src="/static/js/common/jquery.mousewheel.js?1"></script>
<script src="/static/js/common/jquery.tipTip.min.js?1"></script>
<script src="/static/js/common/spin.min.js?1"></script>
<script src="/static/js/common/common.js?1"></script>
<script src="/static/js/desktop/controls.js?1"></script>
<script src="/static/js/common/jquery.mjs.nested-sortable.js?1"></script>
<script src="/static/js/desktop/topic-ordering.js?1"></script>
<script src="/static/js/common/raphael/raphael.js?1"></script>
<script src="/static/js/desktop/everystudy.js?1"></script>
<script src="/static/js/desktop/revision.js?1"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-25079901-2', 'auto');
  ga('require', 'displayfeatures');
</script>
</head>
<body id="topic_index" class="module view sidebar everystudy logged_in controls revision">
	<!-- div class="devwarning" onclick="$('.devwarning, .devwarning_spacer').remove();">개발서버를 수정하고 있습니다</div -->

	<div id="whole_wrapper">
		<div class="head">
			<header>
				<hgroup>
					<p class="title"><a href="http://opentutorials.org/module/1329">평범한 개발자의 C 프로그래밍 이야기</a></p>
					<p class="subtitle"><small></small></p>

					<div class="title">
						<a class="icon bg" href="http://opentutorials.org/module/1329" title="">평범한 개발자의 C 프로그래밍 이야기<span class="ico ico_public"> </span></a>
					</div>
					<!-- small class="return">&dash; <a href="http://opentutorials.org/module">모듈 목록으로 돌아가기</a></small -->
				</hgroup>

				<ul id="left_nav">
					<li id="to_home"><a class="title" href="http://opentutorials.org/"><span>Open</span>tutorials.org</a></li> 
					<li id="btn_create_module"><a class="title" href="http://opentutorials.org/admin/module_basic/0">모듈 만들기</a>
						<form id="new_module_layer" class="submenu layerbox" method="post" action="http://opentutorials.org/admin/module_basic_ajax/0">
							<div class="pin pin_big_top"> </div>
							<div class="wrapper table">
								<div class="head">
									<strong class="icon"><span class="ico_module"></span>새 모듈 만들기</strong>
									<button class="btn_close"><span>닫기</span></button>									
								</div>
								<div class="body">
									<dl>
										<dt><label for="new_module_title">제목</label></dt>
										<dd><input type="text" id="new_module_title" name="title" class="text"/></dd>
									</dl>
									<dl>
										<dt><label for="new_module_cover">커버 내용</label></dt>
										<dd><textarea id="new_module_cover" name="description"></textarea></dd>
									</dl>
									<dl class="new_license">
										<dt><label for="new_license">라이센스</label></dt>
										<dd>
											<input type="checkbox" class="chk" id="new_license" name="license" value="1"/><label for="new_license">오픈 라이센스 사용에 동의합니다.</label>
										</dd>
									</dl>
								</div>
								<div class="tail">
									<button type="submit" class="btn btn_submit">저장</button>
								</div>

								<input type="hidden" name="summary" value=""/>
								<input type="hidden" name="public" value="public"/>
								<input type="hidden" name="skip_cover" value="0"/>
								<input type="hidden" name="cominfo" value=""/>
								<input type="hidden" name="everystudy_label" value=""/>
								<input type="hidden" name="marking_label" value=""/>
							</div>
						</form>
					</li>
					<li id="notify_count">
						<a id="notify_counter" class="title" href="#"><span class="label">알림</span> <span class="count">0</span></a>
						<div id="notifier_layer" class="submenu layerbox">
							<div class="triangle">
								<div class="pin pin_big_top">

								</div>
							</div>
							<div class="wrapper table">
								<div class="head">
									<a href="#" data-type="all" class="notify_cate selected">전체</a> | <a href="#" data-type="comment" class="notify_cate">댓글</a> | <a data-type="mark_topic_marked" class="notify_cate" href="#">봤어요</a>
									<button class="btn_close cancel"><span>닫기</span></button>
								</div>
								<div class="body scrollbox">
									<ul>
										<li class="empty"></li>
									</ul>
									<a class="more_notifier" href="#">더 불러오기</a>
								</div>
								<div class="tail">
								</div>
							</div>	
						</div>
					</li>
				</ul>			<nav id="right_nav">
				<ul>

					<li id="settings">
						<span class="title">gurugio</span>
						<div id="settings_submenu" class="submenu layerbox">
							<div class="pin pin_big_top"></div>
							<div class="table">
								<menu>
									<li><a href="http://opentutorials.org/profile/9992">프로필 보기</a></li>
									<li><a href="/admin/module_topic_edit/1329/8585">관리자</a></li>
									<li><a href="http://opentutorials.org/module/180">도움말</a></li>
									<li><a href="http://opentutorials.org/auth?mode=logout&returnURL=module/1329/8585" id="logout">로그아웃</a></li>
								</menu>
							</div>
						</div>
					</li>
					<li id="activity">
						<span class="title">참여활동</span>
						<div id="activity_submenu" class="submenu layerbox">
							<div class="pin pin_big_top"></div>
							<table>
								<thead>
									<tr>
										<th class="everystudy"><span class="inner">공동공부</span></th>
										<th class="marking"><span class="inner">봤어요</span> <span class="subtitle">누적봤어요 <span class="count">0</span>번</span></th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td class="everystudy">
											<div id="p_everystudy_nest" class="scrollbox"></div>
										</td>
										<td class="marking">
											<div id="p_marking_nest" class="scrollbox"> </div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</li>
					<li id="my_content">
						<span class="title">내 컨텐츠</span>
						<div id="my_content_submenu" class="submenu layerbox">
							<div class="pin pin_big_top"></div>
							<table>
								<thead>
									<tr>
										<th class="course"><span class="inner">코스</span> <div class="controls"><a class="setting" href="http://opentutorials.org/admin/course_basic">설정</a><a class="add" href="http://opentutorials.org/admin/course_basic/0">추가</a></div></th>
										<th class="module"><span class="inner">모듈</span> <div class="controls"><a class="setting" href="http://opentutorials.org/admin/module_basic">설정</a><a class="add" href="http://opentutorials.org/admin/module_basic/0">추가</a></div></th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td class="course">
											<div id="p_course_nest" class="scrollbox"></div>
										</td>
										<td class="module">
											<div id="p_module_nest" class="scrollbox"></div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</li>
				</ul>
			</nav>
			</header>

</div>		<div id="body">
			<div id="breadcrumb">
				<div class="wrapper">

					<span id="study_count">
						<a id="btn_everystudy" href="#everystudy" mode="module">
							<span class="label">공동공부</span> <small>(<span class="count">12</span>명)</small>
						</a>
					</span>

				</div>
			</div>

			<div id="cols">
				<div class="wrapper">

					<aside>
						<div class="controllers">
							<div class="wrapper">
								<div id="left_ctrs">
									<a href="http://opentutorials.org/module/1329/add" id="add" class="btn">토픽 추가</a><a href="http://opentutorials.org/#topic_move" id="order" class="btn">토픽 순서</a>								</div>
							</div>
						</div>
						<div id="topic_list_index" class="index">
								<div class="module_cover">
									<a href="http://opentutorials.org/module/1329">커버 페이지</a>
								</div>
							<h2>토픽 목록</h2>

							<nav class="sub_nav">
								<ol id="topic_list_tree" class="no_draggable">
									<li id="list_8571" class="ready depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8571" class="ready depth_0"><span class="title">터미널 환경 꾸미기</span><span class="ready">준비중</span></a></div>
																			</li>
									<li id="list_8572" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8572" class="depth_0"><span class="title">emacs 설정</span></a></div>
																			</li>
									<li id="list_8573" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8573" class="depth_0"><span class="title">emacs 패키지</span></a></div>
																			</li>
									<li id="list_8574" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8574" class="depth_0"><span class="title">emacs로 소스 빌드하기</span></a></div>
																			</li>
									<li id="list_8575" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8575" class="depth_0"><span class="title">make 시작</span></a></div>
																			</li>
									<li id="list_8576" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8576" class="depth_0"><span class="title">make - configure.in 작성</span></a></div>
																			</li>
									<li id="list_8577" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8577" class="depth_0"><span class="title">make - 예제 소스</span></a></div>
																			</li>
									<li id="list_8578" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8578" class="depth_0"><span class="title">make - 간단한 예제</span></a></div>
																			</li>
									<li id="list_8579" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8579" class="depth_0"><span class="title">make - 좀더 복잡하게</span></a></div>
																			</li>
									<li id="list_8580" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8580" class="depth_0"><span class="title">make - 최종</span></a></div>
																			</li>
									<li id="list_8581" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8581" class="depth_0"><span class="title">make - cmake 소개</span></a></div>
																			</li>
									<li id="list_8583" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8583" class="depth_0"><span class="title">변하는 것과 변하지 않는 것을 구분하는 프로그래밍</span></a></div>
																			</li>
									<li id="list_8582" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8582" class="depth_0"><span class="title">테스트를 위한 입출력 값을 테이블로 정의하기</span></a></div>
																			</li>
									<li id="list_8584" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8584" class="depth_0"><span class="title">인증 번호 생성 1/2</span></a></div>
																			</li>
									<li id="list_8585" class="selected depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8585" class="selected depth_0"><span class="title">인증 번호 생성 2/2</span></a></div>
																			</li>
									<li id="list_8645" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8645" class="depth_0"><span class="title">linux kernel 3.16</span></a></div>
																			</li>
									<li id="list_8644" class="ready depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8644" class="ready depth_0"><span class="title">linux kernel - ion에서 사용된 데이터 heap 소개</span><span class="ready">준비중</span></a></div>
																			</li>
									<li id="list_8647" class="ready depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8647" class="ready depth_0"><span class="title">linux kernel - ion에서 heap을 등록하는 코드</span><span class="ready">준비중</span></a></div>
																			</li>
									<li id="list_8654" class="ready depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8654" class="ready depth_0"><span class="title">linux kernel - ion의 system heap 소개</span><span class="ready">준비중</span></a></div>
																			</li>
									<li id="list_8718" class="private ready depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8718" class="private ready depth_0"><span class="title">구조체 안에 배열 넣기</span><span class="ready">준비중</span></a></div>
																			</li>
								</ol>
							</nav>
						</div>

						<div id="author_identity">
							<h3>생산자</h3>

							<ul>
								<li>
									<div class="profile_image">
										<img class="profile_icon" data-id="9992" src="https://s3-ap-northeast-2.amazonaws.com/opentutorials-user-file/avatar/40/9992.png" alt="">
									</div>
									<div class="name"><strong>gurugio</strong></div>
									<div class="statistics">토픽 59 &nbsp;/&nbsp; 봤어요 0</div>

								</li>
							</ul>
						</div>
					</aside>
					<div class="entry-area">
						<div class="controllers">
							<div class="wrapper">
								<div id="right_ctrs">
<a href="http://opentutorials.org/module/1329/8585/edit" id="edit" class="btn">편집</a><a href="http://opentutorials.org/#" id="delete" class="btn amplify">삭제</a><a href="http://opentutorials.org/module/1329/8585/add" id="add2" class="btn">하위 토픽 추가</a><a id="version" class="btn" href="http://opentutorials.org/module/1329/8585/revision">버전(<span class="count">3</span>)</a>								</div>
							</div>
						</div>
						<article class="hentry">

						<hgroup>
							<h1 class="entry-title">인증 번호 생성 2/2</h1>
							<div class="props">
								<time datetime="">2014-11-10 20:03:41</time>
								<span class="tags">
									| <span class="tag public">공개</span>
									| <span class="tag complete">완료</span>
								</span>
							</div>
						</hgroup>

						<div id="content" class="entry-content">
							<p>&nbsp;</p>

<p><br />
좀더 유연한 프로그램을 설계하기 위해 변하는 것과 변하지 않는 것을 구분해보겠습니다.</p>

<p>변하는 것: 제품 종류, 사용자 ID, 시리얼 번호 포맷<br />
변하지 않는 것: 암호화 알고리즘, 입력 형식(정수형 텍스트)</p>

<p>변하는 것은 사용자가 요청할 제품의 종류와 사용자 자신의 ID입니다. 시리얼 번호를 받았는데 허가된 사용자 외에 아무나 사용할 수 있다면 시리얼 번호로서의 가치가 없겠지요. 따라서 시리얼 번호에는 사용자 ID에 대한 정보가 들어가서 허가된 사용자인지 인증할 수 있어야 합니다. 제품의 종류에 따라 다른 포맷의 시리얼 번호가 생성될 것입니다. 변하지 않는 것에는 암호화 알고리즘이 있고, 사용자 ID와 시리얼 번호가 정수형 텍스트라는 것이 변하지 않는 것입니다.</p>

<p>변하지 않는 것은 고정된 코드가 동일하게 실행됩니다. 정수형 문자를 읽는 코드와 암호/복호화 코드는 일정하게 실행됩니다. 따라서 제품 디자인에서 크게 고려할 것이 없습니다. 변하는 것을 설계하기 위해서는 좀더 많은 생각이 필요합니다. 한가지씩 생각해보겠습니다.</p>

<p>우선 제품의 종류는 greentea와 blacktea로 가정한다고 전제를 하였습니다. 하지만 늘 그렇듯이 언제 봐뀔지 모르는 사항입니다. 따라서 제품의 종류를 지정하는 기능이 필요하고 제품을 구별하기 위한 정보가 필요합니다. 우리는 정수로된 제품 번호를 지정해서 제품을 구별하겠습니다.</p>

<p>사용자 ID는 사람마다 다른 정수 값을 지정하는 것으로 처리하겠습니다.</p>

<p>시리얼 번호 포맷도 제품 종류가 바뀌면 따라서 바뀔 수 있는 것입니다. 시리얼 번호 포맷은 제품마다 다르게 만들겠습니다. greentea는 3자리-4자리-3자리의 시리얼 번호를 가지고, blacktea는 4자리-5자리-4자리의 시리얼 번호를 갖도록 만들어보겠습니다.&nbsp;</p>

<p>그럼 변하는 것들은 누가 어떻게 지정해주어야 할까요. 사용자의 제품 구매 시나리오를 생각해보면 사용자가 제품을 고르고 자기 ID를 입력합니다. 그러면 회사에서 시리얼 번호와 제품을 전송해주고 사용자는 제품을 실행하면서 시리얼 번호를 입력하게 됩니다. 사용자가 입력해야하는 것은 제품 번호와 사용자 ID입니다. 변하는 것들 중에서 2가지는 사용자의 입력을 받으면 알 수 있는 것인데 시리얼 번호 포맷은 어떻게 알아낼 수 있을까요? 또 누가 지정해야하는 것일까요?</p>

<p>보통 이런 경우에는 설정 파일을 만들게 됩니다. vi에서 사용하는 .vimrc나 emacs의 .emacs와 같이 프로그램의 동작을 지정하는 설정 파일을 만들어서 시리얼 생성 프로그램이 규격 파일을 읽고 규격에 맞게 시리얼 번호를 생성하도록 만듭니다. 즉 다음과 같이 3가지 단계로 시리얼번호가 생성됩니다.</p>

<p>사용자가 자신의 ID, 제품 번호 전송 -&gt; 설정 파일 생성 -&gt; 시리얼 번호 생성</p>

<p>.vimrc나 .emacs는 제품이 이미 빌드된 상태에서 프로그램의 동작을 설정하는 파일이므로 프로그램이 내부적으로 사용하는 스크립트언어로 작성되어있습니다. 우리는 프로그램을 빌드하는 단계에서 설정 파일이 필요한 것이므로 C언어로 설정 파일을 만들겠습니다. &nbsp;스크립트를 만들어서 사용하는 것보다 스크립트를 번역할 필요가 없으므로 더 간단해집니다. 또 설정 파일을 작성하는 사람이 .vimrc는 일반 사용자이지만 우리의 경우는 개발자입니다. 따라서 개발 언어를 사용하는 것이 타당합니다.</p>

<p>사용자에게 ID와 제품 번호를 전달받는 것은 웹페이지 등을 이용해서 자동으로 &nbsp;가정하고 우리는 규격 파일의 생성부터 시작해보겠습니다.</p>

<p>다음은 serial.h 파일입니다. 우리가 시리얼 생성을 위해 어떤 포맷을 사용할지는 모릅니다만 제품 번호와같은 항목이 있고, 그 항목은 문자열이라는 것과 자릿수가 정해진다는 것은 정해져있습니다. 따라서 struct serial_data와 같은 구조체를 만들면 그 항목이 어떤 것이든 구체화할 수 있습니다.</p>

<p>그리고 모든 항목을 모아놓은 struct serial_desc 구조체가 있으므로 시리얼을 생성할 때마다 일정하게 struct serial_desc 구조체의 객체만 참조하면 됩니다.</p>

<p>데이터의 타입이나 형태는 변하지 않습니다. 어떤 데이터가 들어올지는 변합니다. 헤더 파일에 변하지 않는 데이터의 속성들을 정의했습니다.</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<div><span style="line-height: 19.6019992828369px;">#if !defined(_SERIAL_H_)</span></div>

<div><span style="line-height: 19.6019992828369px;">#define _SERIAL_H_</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">#include &lt;stdio.h&gt;</span></div>

<div><span style="line-height: 19.6019992828369px;">#include &lt;string.h&gt;</span></div>

<div>&nbsp;</div>

<div>&nbsp;</div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">typedef struct serial_desc</span></div>

<div><span style="line-height: 19.6019992828369px;">{</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; char *product_name;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; struct serial_data *serial_data_array;</span></div>

<div><span style="line-height: 19.6019992828369px;">} serial_desc;</span></div>

<div>&nbsp;</div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">/**</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp;* descriptor of each data</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp;*/</span></div>

<div><span style="line-height: 19.6019992828369px;">typedef struct serial_data</span></div>

<div><span style="line-height: 19.6019992828369px;">{</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; /**</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp;* name as C-string</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp;*/</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; char *name;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; /**</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp;* maximum digit</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp;*/</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; int digit;</span></div>

<div><span style="font-size: 13px; line-height: 19.6019992828369px;">} serial_data;</span></div>

<div>&nbsp;</div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">int serial_init(serial_desc *);</span></div>

<div><span style="line-height: 19.6019992828369px;">void serial_final(serial_desc *);</span></div>

<div><span style="line-height: 19.6019992828369px;">void serial_generate(serial_desc *);</span></div>

<div><span style="line-height: 19.6019992828369px;">void serial_verify(serial_desc *);</span></div>

<div><span style="line-height: 19.6019992828369px;">void serial_view(serial_desc *);</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">#endif</span></div>

<p>&nbsp;</p>

<p><span style="font-size: 13px; line-height: 23.7600002288818px;">다음은 규격 파일의 예입니다.</span></p>

<p>serial_data_table[]이 만들어졌습니다. 이제 데이터의 형태가 구체화되었습니다. 시리얼 생성에 3개의 데이터 항목이 들어가고 각각의 이름과 자릿수가 지정되었습니다. 개발자가 아니더라도 알기 쉽게 작성되었습니다. 혹시라도 시리얼 생성을 관리하는 담당자가 개발부서가 아니더라도 여기있는 데이터의 형식만 알고있다면 데이터를 추가하거나 자릿수를 바꾸는 등의 작업을 할 수 있습니다. 시리얼 생성이라는 작업이 누구나 할 수 있는 유연한 작업이 된 것입니다.</p>

<p><br />
#include &quot;serial.h&quot;</p>

<p>&nbsp;</p>

<p><br />
serial_data serial_data_table[] =<br />
{<br />
&nbsp; &nbsp; {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &quot;PRODUCT ID&quot;,<br />
&nbsp; &nbsp; &nbsp; &nbsp; 2,<br />
&nbsp; &nbsp; },<br />
&nbsp; &nbsp; {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &quot;EXPIRE DATE&quot;,<br />
&nbsp; &nbsp; &nbsp; &nbsp; 6,<br />
&nbsp; &nbsp; },<br />
&nbsp; &nbsp; {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &quot;USER ID&quot;,<br />
&nbsp; &nbsp; &nbsp; &nbsp; 4,<br />
&nbsp; &nbsp; },<br />
&nbsp; &nbsp; SERIAL_SENTINEL&nbsp;<br />
};</p>

<p><br />
serial_desc my_serial_desc =<br />
{<br />
&nbsp; &nbsp; &quot;serial for greetea&quot;,<br />
&nbsp; &nbsp; serial_data_table<br />
};</p>

<p><br />
/**<br />
&nbsp;* g_serial_data must be declared with user&#39;s serial-data<br />
&nbsp;*/<br />
serial_desc *g_serial_data = &amp;my_serial_desc;</p>

<p>&nbsp;</p>

<p>다음은 serial_core.c 파일입니다. 시리얼 생성에 필요한 serial_desc 데이터가 제대로 준비되었는지 확인하는 serial_init 함수와 시리얼 생성이 완료되었다고 표시하는 serial_final 함수가 있습니다.</p>

<p>시리얼을 생성하는 함수는 serial_generate함수입니다. serial_generate함수는 my_encode함수를 이용해서 시리얼에 들어가는 각 데이터를 나름대로 변환해서 시리얼을 만듭니다. 반대로 serial_view 함수는 my_decode함수를 이용해서 my_encode함수에서 변환한 데이터를 복원해서 문자열로 만듭니다.</p>

<p>my_encode나 my_decode도 사실은 변하는 것입니다. 시리얼을 만들때 기존 데이터를 어떻게 처리할지는 정해지지 않은 것이니까요. 암호화를 할 수도 있고, 압축을 할 수도 있고 얼마든지 나름의 방식으로 처리할 수 있는 것입니다. 여기서는 최대한 단순하게 만들기위해 지금처럼 고정해놓았지만 serial.h에 나름의 인코딩/디코딩 스펙을 정하는 표현을 만들어보시기 바랍니다.</p>

<p>&nbsp;</p>

<div><span style="line-height: 19.6019992828369px;">#include &lt;stdint.h&gt;</span></div>

<div><span style="line-height: 19.6019992828369px;">#include &lt;string.h&gt;</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">#include &quot;serial.h&quot;</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">#if defined(VERBOSE_MODE)</span></div>

<div><span style="line-height: 19.6019992828369px;">#define PRINT(fmt, args...) printf(&quot;[%s:%d]: &quot; fmt, \</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;__FUNCTION__, __LINE__, ##args)</span></div>

<div><span style="line-height: 19.6019992828369px;">#else</span></div>

<div><span style="line-height: 19.6019992828369px;">#define PRINT(fmt, args...)</span></div>

<div><span style="line-height: 19.6019992828369px;">#endif</span></div>

<div>&nbsp;</div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">int serial_init(serial_desc *desc)</span></div>

<div><span style="line-height: 19.6019992828369px;">{</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; serial_data *data_array = desc-&gt;serial_data_array;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; int i;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; int ret = 0;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp;&nbsp;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; PRINT(&quot;initialize serial generator\n&quot;);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; PRINT(&quot;making serial for %s\n&quot;, desc-&gt;product_name);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; PRINT(&quot;verification data are:\n&quot;);</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; for (i = 0; ; i++)</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; {</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; if (data_array[i].name == NULL &amp;&amp; data_array[i].digit == 0)</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; {</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ret = 1;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; else if (data_array[i].name != NULL &amp;&amp; data_array[i].digit == 0)</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; {</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ret = 2;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; else if (data_array[i].name == NULL &amp;&amp; data_array[i].digit != 0)</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; {</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ret = 3;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; else if (data_array[i].verify_func == NULL)</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; {</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ret = 4;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; else</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; {</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PRINT(&quot;[%s(%d)]\n&quot;, data_array[i].name, data_array[i].digit);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; }</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; if (ret != 0)</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; {</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;incorrect information at %d-th descriptor\n&quot;, ret);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; }</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp;&nbsp;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; return ret;</span></div>

<div><span style="line-height: 19.6019992828369px;">}</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">void serial_final(serial_desc *desc)</span></div>

<div><span style="line-height: 19.6019992828369px;">{</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; PRINT(&quot;finish serial generator\n&quot;);</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; return;</span></div>

<div><span style="line-height: 19.6019992828369px;">}</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">char *my_encode(char *data, size_t len)</span></div>

<div><span style="line-height: 19.6019992828369px;">{</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; for (;len &gt; 0; len--)</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; {</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; *data = (*data) + 1;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; data++;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; }</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; return data;</span></div>

<div><span style="line-height: 19.6019992828369px;">}</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">char *my_decode(char *data, size_t len)</span></div>

<div><span style="line-height: 19.6019992828369px;">{</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp;for (;len &gt; 0; len--)</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp;{</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp;*data = (*data) - 1;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp;data++;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp;}</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp;return data;</span></div>

<div><span style="line-height: 19.6019992828369px;">}</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">void serial_generate(serial_desc *desc)</span></div>

<div><span style="line-height: 19.6019992828369px;">{</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; int i;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; serial_data *data_array = desc-&gt;serial_data_array;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; char buf[SERIAL_LENGTH_MAX];</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; char result[SERIAL_LENGTH_MAX];</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; result[0] = &#39;\0&#39;;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp;&nbsp;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; for (i = 0; data_array[i].name != NULL; i++)</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; {</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; memset(buf, 0, SERIAL_LENGTH_MAX);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;insert [%s(%d)]: &quot;, data_array[i].name, data_array[i].digit);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; scanf(&quot;%s&quot;, buf);</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; my_encode(buf, data_array[i].digit);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; strcat(result, buf);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; }</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; printf(&quot;%s\n&quot;, result);</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; return;</span></div>

<div><span style="line-height: 19.6019992828369px;">}</span></div>

<div>&nbsp;</div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">void serial_view(serial_desc *desc)</span></div>

<div><span style="line-height: 19.6019992828369px;">{</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; int i;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; serial_data *data_array = desc-&gt;serial_data_array;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; char serial[SERIAL_LENGTH_MAX];</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; int serial_index;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; char buf[SERIAL_LENGTH_MAX];</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; int total_len;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp;&nbsp;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; memset(serial,0,SERIAL_LENGTH_MAX);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; printf(&quot;insert serial: &quot;);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; scanf(&quot;%s&quot;, serial);</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; my_decode(serial, strnlen(serial, SERIAL_LENGTH_MAX));</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; total_len = 0;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; for (i = 0; data_array[i].name != NULL; i++)</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; {</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; total_len += data_array[i].digit;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; }</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; if (total_len != strnlen(serial, SERIAL_LENGTH_MAX))</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; {</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;Serial length error: input %d-digit serial\n&quot;, total_len);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; return;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; }</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp;&nbsp;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; serial_index = 0;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; for (i = 0; data_array[i].name != NULL; i++)</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; {</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; strncpy(buf, &amp;serial[serial_index], data_array[i].digit);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; buf[data_array[i].digit] = &#39;\0&#39;;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;serial data [%s(%d)]=%s\n&quot;,</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;data_array[i].name,</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;data_array[i].digit,</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;buf);</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; &nbsp; &nbsp; serial_index += data_array[i].digit;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; }</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; return;</span></div>

<div><span style="line-height: 19.6019992828369px;">}</span></div>

<div>&nbsp;</div>

<div>다음은 시리얼을 생성하는 프로그램 serial_gen.c 입니다.</div>

<div>너무나 간단하지 않나요? serial_gen.c는 더이상 변할게 없으므로 시리얼 데이터의 포맷이 아무리 바껴도 수정할 필요가 없습니다. 이렇게 소스로 존재할 필요도 없이 미리 컴파일해서 오브젝트 코드로 배포할 수도 있습니다. 사업모델에 따라 얼마든지 융통성을 발휘해서 배포하거나 웹에서 처리하도록하거나 할 수 있습니다.</div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">#include &lt;stdint.h&gt;</span></div>

<div><span style="line-height: 19.6019992828369px;">#include &lt;stdio.h&gt;</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">#include &quot;serial.h&quot;</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">extern serial_desc *g_serial_data;</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">int main(void)</span></div>

<div><span style="line-height: 19.6019992828369px;">{</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; serial_init(g_serial_data);</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; serial_generate(g_serial_data);</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; serial_final(g_serial_data);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp;&nbsp;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; return 0;</span></div>

<div><span style="line-height: 19.6019992828369px;">}</span></div>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>다음은 시리얼 번호에서 데이터를 뽑아내는 serial_view.c 파일입니다.</p>

<p>serial_gen.c와 마찬가지로 간단하고 변하지 않습니다.</p>

<div><span style="line-height: 19.6019992828369px;">#include &lt;stdint.h&gt;</span></div>

<div><span style="line-height: 19.6019992828369px;">#include &lt;stdio.h&gt;</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">#include &quot;serial.h&quot;</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">extern serial_desc *g_serial_data;</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">int main(void)</span></div>

<div><span style="line-height: 19.6019992828369px;">{</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; serial_init(g_serial_data);</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; serial_view(g_serial_data);</span></div>

<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; serial_final(g_serial_data);</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp;&nbsp;</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp; &nbsp; return 0;</span></div>

<div><span style="line-height: 19.6019992828369px;">}</span></div>

<div>&nbsp;</div>

<div>&nbsp;</div>

<div>마지막으로 Makefile을 보겠습니다.</div>

<div>gen과 view 2개의 프로그램을 만듭니다. gen을 실행하면 시리얼 번호를 만들고, view를 실행하면 시리얼 번호를 입력해서 시리얼 번호 생성에 들어간 데이터를 확인할 수 있습니다.</div>

<div>serial_core.c는 소스로 존재할 필요도 없이 serial_core.o가 될 수 있습니다. 또 제품이 바뀌면 desc_greentea.c를 desc_blacktea.c로 바꿀 수도 있습니다.</div>

<div>웹으로 시리얼을 생성하거나 GUI 어플로도 다양한 제품들의 시리얼 생성 시스템을 꾸밀 수 있습니다. 이렇게 변하는 것과 변하지 않는 것을 소스 파일로도 분리한다면 빌드 시스템 또한 다양하게 적용할 수 있게 됩니다.</div>

<div>
<div>&nbsp;</div>

<div><span style="line-height: 19.6019992828369px;">all:</span></div>

<div><span style="line-height: 19.6019992828369px;">&nbsp;&nbsp; &nbsp;gcc -Wall -o gen serial_core.c serial_gen.c desc_greentea.c -DVERBOSE_MODE</span></div>

<div><span style="font-size: 13px; line-height: 19.6019992828369px;">&nbsp; &nbsp; gcc -Wall -o view serial_core.c serial_view.c desc_greentea.c -DVERBOSE_MODE</span></div>
</div>
						</div>

						</article>
					<div id="social_group">
						<ul>
							<li id="facebook_like"><div class="fb-like" data-send="true" data-layout="button_count" data-width="450" data-height="20" data-show-faces="false"></div></li>
							<li id="readit">
								<a class="marking" href="#" data-mark-id="0"><span class="action">봤어요</span> (<span class="count">1</span>명)</a>
							</li>
							<li id="topic_navigator">
								<ul>
									<li class="prev"><a href="http://opentutorials.org/module/1329/8584">이전</a></li><li class="next"><a href="http://opentutorials.org/module/1329/8645">다음</a></li>
								</ul>
							</li>
						</ul>
					</div>

					<div id="fb-root"></div>
					<script>
						(function(d, s, id) {
							var js, fjs = d.getElementsByTagName(s)[0];
							if (d.getElementById(id)) return;
							js = d.createElement(s); js.id = id;
							js.src = "//connect.facebook.net/ko_KR/all.js#xfbml=1";
							js.async = true;
							fjs.parentNode.insertBefore(js, fjs);
						}(document, 'script', 'facebook-jssdk'));

						function doMarking() {
							var marker = $('#social_group a.marking');
							var markType = marker.hasClass('marked') ? 'unmark' : 'marking';
							ga('send', 'event', 'Participation', 'mark_'+markType, path_context+(topic_id ? '/'+topic_id : '')+', '+document.title , {useBeacon:true});
							$.ajax({
								url: "http://opentutorials.org/module/1329/8585/marking_ajax",
								data: {'type':'saw', 'marktype':markType, 'mark_id':marker.data('mark-id')},
								type: 'post',
								dataType: 'json',
								success: function (response) {
									if (response.result) {
										if (response.data.status == 'unmarked'){
											marker.removeClass('marked');
											marker.find('span.action').html("봤어요");
											var count = Number(marker.find('span.count').text());
											marker.find('span.count').text(count - 1);
										} else {
											marker.addClass('marked');
											marker.find('span.action').html("봤어요 취소");
											var count = Number(marker.find('span.count').text());
											marker.find('span.count').text(count + 1);
										}

										marker.data('mark-id', response.data.id);
									} else {
										if (response.errorCode == 1) {
											var dialog = LoginDialogManager.get();
											dialog.show(true);
										} else {
											xalert(NULL, response.msg, {modal:true});
										}
									}
								}
							})
						}

						function handleMarking(event) {
							event.preventDefault();
							doMarking();
						}

						$('#readit a.marking').click(handleMarking);
					</script>
<div id="comment" data-role="collapsible">
	<h3>댓글</h3>

	<form id="comment_new_form" method="post" action="http://opentutorials.org/comment/add_ajax" data-ajax="true">
		<div class="profile_image">
			<img src="https://s3-ap-northeast-2.amazonaws.com/opentutorials-user-file/avatar/40/9992.png" alt="">
		</div>

		<div class="form_wrapper">
			<dl class="comment_form_content">
				<dt>댓글 본문</dt>
				<dd>
					<div id="reply_indicator">
						<a>리체님의 댓글에 대한 답글입니다.</a>
						<input type="hidden" name="parent" value="">
						<a class="btn btn_unchain" href="#">삭제</a>
					</div>
					<textarea name="cmt_content"></textarea>
				</dd>
			</dl>
			<div class="buttons">
				<input type="hidden" name="course_id" value="0">
				<input type="hidden" name="module_id" value="1329">
				<input type="hidden" name="topic_id" value="8585">

				<button type="submit"><span>댓글 올리기</span></button>
			</div>
		</div>
	</form>
	
	<ol id="comment_list">
		<li id="comment16585" data-id="16585">
			<div class="profile_image">
				<img class="profile_icon" data-id="0" src="/static/img/common/40_profile.png" alt="">
			</div>


			<div class="name time">
				<strong>리밍즈</strong><a href="#comment16585" name="comment16585"><time datetime="2015-07-30 17:31:53">9개월 전</time></a>
			</div>

			<div class="comment_content">
				kr이라는 프로그램을 사용하고 있는데 사용자번호 5자리와 컴퓨터번호 4자리-4자리-4자리로 구성되어잇는데 이것을 알려주면 해독번호를 알려줍니다. 그런데 2002년에 나온 프로금램이라 현재는 사용자도 없고 회사도 없습니다. 저는 이프로그램으로 자료를 입력해뇌서 꼭 인증번호를 만들어야 하는대 컴퓨터가  메인보드가 바귀면 새로운 인증번호를 입력해야 해야 합니다. 이 인증번호 해독 프로그램을 만들어 주실 수있나요 사례는 따로 하겠습니다.<br />
kdk3355@naver.com<br />
<br />
예 사용자번호 85457<br />
컴퓨터번호 (프로그램 설치하면 발생함)<br />
0010-7485-5183<br />
인증먼호<br />
0010-2922-8855(예문임)<br />
이런식입니다.<br />
연락 부탁드립니다.			</div>

			<div class="buttons">
				<a class="icon block reply" href="#"><span class="ico ico_reply"></span> 답글</a> <a class="icon block delete" href="#"><span class="ico ico_close"></span> 삭제</a>
			</div>
		</li>
		<li id="comment10941" data-id="10941">
			<div class="profile_image">
				<img class="profile_icon" data-id="9992" src="https://s3-ap-northeast-2.amazonaws.com/opentutorials-user-file/avatar/40/9992.png" alt="">
			</div>


			<div class="name time">
				<strong>gurugio</strong><a href="#comment10941" name="comment10941"><time datetime="2014-11-10 20:03:52">1년 전</time></a>
			</div>

			<div class="comment_content">
				<a href="https://github.com/gurugio/calib_book/tree/master/ch03/ch03.2/ch03.2.2">https://github.com......2.2</a><br />
소스			</div>

			<div class="buttons">
				<a class="icon block reply" href="#"><span class="ico ico_reply"></span> 답글</a> <a class="icon block edit" href="#"><span class="ico ico_modify"></span> 수정</a> <a class="icon block delete" href="#"><span class="ico ico_close"></span> 삭제</a>
			</div>
		</li>
	</ol>

	<div id="cmt_more" class="hidden">
		<a href="#"><span>더 보기</span></a>
	</div>
</div>					</div>
					<div style="clear: both"></div>
				
<div class="revision-control layerbox">
	<div class="pin pin_big_right"></div>
	<div class="wrapper table">
		<hgroup class="head">
			버전 관리
			<button class="btn_close"><span>닫기</span></button>
		</hgroup>
		
		<div class="layout scrollbox">
			<table class="select">
				<tbody>
					<tr data-value="0" class="current">
						<td class="updated"><time>2014-11-18 02:16:38</time></td>
						<td class="user">gurugio</td>
					</tr>
				</tbody>
			</table>
		</div>

		<div class="selected">
			<table>
				<tbody>
					<tr class="current">
						<th class="name">현재 버전</th>
						<td class="datetime"><time>2014-11-18 02:16:38</time></td>
					</tr>
					<tr class="selected">
						<th class="name">선택 버전</th>
						<td class="datetime"><time id="selected-revision"></time></td>
					</tr>
				</tbody>
			</table>
		</div>
		
		<div class="btns">
			<button class="btn_small restore" disabled>선택한 버전으로 복원</button>
			<input type="checkbox" name="compare" id="compare" checked="checked" disabled/><label for="compare">버전 비교</label>
		</div>
	</div>
</div>
				
					<div id="footer">
						<a href="http://opentutorials.org/home/viewmode_mobile?returnURL=http%3A%2F%2Fopentutorials.org%2Fmodule%2F1329%2F8585">모바일 버전</a>
					</div>

					<div class="clear"></div>
				</div>
			</div>
		</div>
	</div>

	<div id="author_balloon">
		<div class="box">
			<img class="avatar" src="http://opentutorials.org/static/img/common/blank.gif" alt="" style="background-image: none">
		</div>

		<div class="header">
			<strong>graphittie</strong>
			<a href="#">자세히 보기</a>
		</div>

		<div class="body">
			<ul id="statistics">
				<li class="topic"><span class="text"><i></i>토픽</span> <span class="count">0</span></li>
				<li class="module"><span class="text"><i></i>모듈</span> <span class="count">0</span></li>
				<li class="course"><span class="text"><i></i>코스</span> <span class="count">0</span></li>
				<li class="readit"><span class="text"><i></i>봤어요</span> <span class="count">0</span></li>
				<li class="comment"><span class="text"><i></i>댓글</span> <span class="count">0</span></li>
				<li class="hof"><span class="text"><i></i>명예의 전당</span> <span class="count">0</span></li>
			</ul>
		</div>
	</div>

	<div id="holder">

	</div>

<script src="/static/js/desktop/comment.js?1"></script>
<script src="/static/js/desktop/script.js?1"></script>
	<script>
		if (DOMLoader.callbacks.length) {
			for (var i=0, max=DOMLoader.callbacks.length; i<max; i++)
				DOMLoader.callbacks[i]();
		}

	</script>
	<script>
	if(window.google_analytics_page_set_object) {
		ga('set', google_analytics_page_set_object);
	};
	if(ga) {
		ga('send', 'pageview');
	}
</script>
</body>
</html>
