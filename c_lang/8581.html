<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="Author" content="OpenTutorials">
	<meta http-equiv="x-ua-compatible" content="IE=EDGE">
	<meta name="viewport" content="width=1280">
	<title>make - cmake 소개 - 평범한 개발자의 C 프로그래밍 이야기</title>
    <link rel="apple-touch-icon" sizes="57x57" href="/static/img/common/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/img/common/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/img/common/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/img/common/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/img/common/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/img/common/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/img/common/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/img/common/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/img/common/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/static/img/common/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/img/common/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/img/common/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/img/common/favicon/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/static/img/common/favicon/apple-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

	<link rel="icon" href="/static/img/common/favicon/favicon-32x32.png" type="image/x-icon">
	<meta property="og:title" content="make - cmake 소개 - 평범한 개발자의 C 프로그래밍 이야기">
	<meta property="og:type" content="university">
	<meta property="og:url" content="http://opentutorials.org/module/1329/8581">
	<meta property="og:image" content="">
	<meta property="og:site_name" content="평범한 개발자의 C 프로그래밍 이야기">
	<meta property="fb:admins" content="1015740740">
	<!--[if lt IE 9]>
	<script>
		document.createElement('header');
		document.createElement('nav');
		document.createElement('section');
		document.createElement('article');
		document.createElement('aside');
		document.createElement('footer');
		document.createElement('hgroup');
	</script>
	<![endif]-->
	<script type="text/javascript">
		var outpath = '/admin/module_topic_edit/1329/8581';
		var path_context = 'module/1329';
		var user_id = 9992;
		var topic_id = 8581;
		var base_url = "http://opentutorials.org/";
		var file_url = "/static/";
		var user_file_url = "https://s3-ap-northeast-1.amazonaws.com/opentutorialsfile/";
		var hash = window.location.hash == undefined ? '' : window.location.hash.substr(1);
		var cmt_paging_unit = 50;
		var autosave_interval = 1;
		var CKEDITOR_BASEPATH = base_url + 'static/js/common/ckeditor/';
	</script>
<link href="/static/css/common/reset.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/common/tipTip.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/common.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/menus.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/style.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/content.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/everystudy.css?1" rel="stylesheet" type="text/css" media="all" />
<script src="/static/js/common/jquery/jquery-1.8.3.custom.min.js?1"></script>
<script src="/static/js/common/jquery.ui/1.9.2/js/jquery-ui-1.9.2.custom.min.js?1"></script>
<script src="/static/js/common/jquery.browser.min.js?1"></script>
<script src="/static/js/common/jquery.mousewheel.js?1"></script>
<script src="/static/js/common/jquery.tipTip.min.js?1"></script>
<script src="/static/js/common/spin.min.js?1"></script>
<script src="/static/js/common/common.js?1"></script>
<script src="/static/js/desktop/controls.js?1"></script>
<script src="/static/js/common/jquery.mjs.nested-sortable.js?1"></script>
<script src="/static/js/desktop/topic-ordering.js?1"></script>
<script src="/static/js/common/raphael/raphael.js?1"></script>
<script src="/static/js/desktop/everystudy.js?1"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-25079901-2', 'auto');
  ga('require', 'displayfeatures');
</script>
</head>
<body id="topic_index" class="module view sidebar everystudy logged_in controls">
	<!-- div class="devwarning" onclick="$('.devwarning, .devwarning_spacer').remove();">개발서버를 수정하고 있습니다</div -->

	<div id="whole_wrapper">
		<div class="head">
			<header>
				<hgroup>
					<p class="title"><a href="http://opentutorials.org/module/1329">평범한 개발자의 C 프로그래밍 이야기</a></p>
					<p class="subtitle"><small></small></p>

					<div class="title">
						<a class="icon bg" href="http://opentutorials.org/module/1329" title="">평범한 개발자의 C 프로그래밍 이야기<span class="ico ico_public"> </span></a>
					</div>
					<!-- small class="return">&dash; <a href="http://opentutorials.org/module">모듈 목록으로 돌아가기</a></small -->
				</hgroup>

				<ul id="left_nav">
					<li id="to_home"><a class="title" href="http://opentutorials.org/"><span>Open</span>tutorials.org</a></li> 
					<li id="btn_create_module"><a class="title" href="http://opentutorials.org/admin/module_basic/0">모듈 만들기</a>
						<form id="new_module_layer" class="submenu layerbox" method="post" action="http://opentutorials.org/admin/module_basic_ajax/0">
							<div class="pin pin_big_top"> </div>
							<div class="wrapper table">
								<div class="head">
									<strong class="icon"><span class="ico_module"></span>새 모듈 만들기</strong>
									<button class="btn_close"><span>닫기</span></button>									
								</div>
								<div class="body">
									<dl>
										<dt><label for="new_module_title">제목</label></dt>
										<dd><input type="text" id="new_module_title" name="title" class="text"/></dd>
									</dl>
									<dl>
										<dt><label for="new_module_cover">커버 내용</label></dt>
										<dd><textarea id="new_module_cover" name="description"></textarea></dd>
									</dl>
									<dl class="new_license">
										<dt><label for="new_license">라이센스</label></dt>
										<dd>
											<input type="checkbox" class="chk" id="new_license" name="license" value="1"/><label for="new_license">오픈 라이센스 사용에 동의합니다.</label>
										</dd>
									</dl>
								</div>
								<div class="tail">
									<button type="submit" class="btn btn_submit">저장</button>
								</div>

								<input type="hidden" name="summary" value=""/>
								<input type="hidden" name="public" value="public"/>
								<input type="hidden" name="skip_cover" value="0"/>
								<input type="hidden" name="cominfo" value=""/>
								<input type="hidden" name="everystudy_label" value=""/>
								<input type="hidden" name="marking_label" value=""/>
							</div>
						</form>
					</li>
					<li id="notify_count">
						<a id="notify_counter" class="title" href="#"><span class="label">알림</span> <span class="count">0</span></a>
						<div id="notifier_layer" class="submenu layerbox">
							<div class="triangle">
								<div class="pin pin_big_top">

								</div>
							</div>
							<div class="wrapper table">
								<div class="head">
									<a href="#" data-type="all" class="notify_cate selected">전체</a> | <a href="#" data-type="comment" class="notify_cate">댓글</a> | <a data-type="mark_topic_marked" class="notify_cate" href="#">봤어요</a>
									<button class="btn_close cancel"><span>닫기</span></button>
								</div>
								<div class="body scrollbox">
									<ul>
										<li class="empty"></li>
									</ul>
									<a class="more_notifier" href="#">더 불러오기</a>
								</div>
								<div class="tail">
								</div>
							</div>	
						</div>
					</li>
				</ul>			<nav id="right_nav">
				<ul>

					<li id="settings">
						<span class="title">gurugio</span>
						<div id="settings_submenu" class="submenu layerbox">
							<div class="pin pin_big_top"></div>
							<div class="table">
								<menu>
									<li><a href="http://opentutorials.org/profile/9992">프로필 보기</a></li>
									<li><a href="/admin/module_topic_edit/1329/8581">관리자</a></li>
									<li><a href="http://opentutorials.org/module/180">도움말</a></li>
									<li><a href="http://opentutorials.org/auth?mode=logout&returnURL=module/1329/8581" id="logout">로그아웃</a></li>
								</menu>
							</div>
						</div>
					</li>
					<li id="activity">
						<span class="title">참여활동</span>
						<div id="activity_submenu" class="submenu layerbox">
							<div class="pin pin_big_top"></div>
							<table>
								<thead>
									<tr>
										<th class="everystudy"><span class="inner">공동공부</span></th>
										<th class="marking"><span class="inner">봤어요</span> <span class="subtitle">누적봤어요 <span class="count">0</span>번</span></th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td class="everystudy">
											<div id="p_everystudy_nest" class="scrollbox"></div>
										</td>
										<td class="marking">
											<div id="p_marking_nest" class="scrollbox"> </div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</li>
					<li id="my_content">
						<span class="title">내 컨텐츠</span>
						<div id="my_content_submenu" class="submenu layerbox">
							<div class="pin pin_big_top"></div>
							<table>
								<thead>
									<tr>
										<th class="course"><span class="inner">코스</span> <div class="controls"><a class="setting" href="http://opentutorials.org/admin/course_basic">설정</a><a class="add" href="http://opentutorials.org/admin/course_basic/0">추가</a></div></th>
										<th class="module"><span class="inner">모듈</span> <div class="controls"><a class="setting" href="http://opentutorials.org/admin/module_basic">설정</a><a class="add" href="http://opentutorials.org/admin/module_basic/0">추가</a></div></th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td class="course">
											<div id="p_course_nest" class="scrollbox"></div>
										</td>
										<td class="module">
											<div id="p_module_nest" class="scrollbox"></div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</li>
				</ul>
			</nav>
			</header>

</div>		<div id="body">
			<div id="breadcrumb">
				<div class="wrapper">

					<span id="study_count">
						<a id="btn_everystudy" href="#everystudy" mode="module">
							<span class="label">공동공부</span> <small>(<span class="count">12</span>명)</small>
						</a>
					</span>

				</div>
			</div>

			<div id="cols">
				<div class="wrapper">

					<aside>
						<div class="controllers">
							<div class="wrapper">
								<div id="left_ctrs">
									<a href="http://opentutorials.org/module/1329/add" id="add" class="btn">토픽 추가</a><a href="http://opentutorials.org/#topic_move" id="order" class="btn">토픽 순서</a>								</div>
							</div>
						</div>
						<div id="topic_list_index" class="index">
								<div class="module_cover">
									<a href="http://opentutorials.org/module/1329">커버 페이지</a>
								</div>
							<h2>토픽 목록</h2>

							<nav class="sub_nav">
								<ol id="topic_list_tree" class="no_draggable">
									<li id="list_8571" class="ready depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8571" class="ready depth_0"><span class="title">터미널 환경 꾸미기</span><span class="ready">준비중</span></a></div>
																			</li>
									<li id="list_8572" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8572" class="depth_0"><span class="title">emacs 설정</span></a></div>
																			</li>
									<li id="list_8573" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8573" class="depth_0"><span class="title">emacs 패키지</span></a></div>
																			</li>
									<li id="list_8574" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8574" class="depth_0"><span class="title">emacs로 소스 빌드하기</span></a></div>
																			</li>
									<li id="list_8575" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8575" class="depth_0"><span class="title">make 시작</span></a></div>
																			</li>
									<li id="list_8576" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8576" class="depth_0"><span class="title">make - configure.in 작성</span></a></div>
																			</li>
									<li id="list_8577" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8577" class="depth_0"><span class="title">make - 예제 소스</span></a></div>
																			</li>
									<li id="list_8578" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8578" class="depth_0"><span class="title">make - 간단한 예제</span></a></div>
																			</li>
									<li id="list_8579" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8579" class="depth_0"><span class="title">make - 좀더 복잡하게</span></a></div>
																			</li>
									<li id="list_8580" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8580" class="depth_0"><span class="title">make - 최종</span></a></div>
																			</li>
									<li id="list_8581" class="selected depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8581" class="selected depth_0"><span class="title">make - cmake 소개</span></a></div>
																			</li>
									<li id="list_8583" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8583" class="depth_0"><span class="title">변하는 것과 변하지 않는 것을 구분하는 프로그래밍</span></a></div>
																			</li>
									<li id="list_8582" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8582" class="depth_0"><span class="title">테스트를 위한 입출력 값을 테이블로 정의하기</span></a></div>
																			</li>
									<li id="list_8584" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8584" class="depth_0"><span class="title">인증 번호 생성 1/2</span></a></div>
																			</li>
									<li id="list_8585" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8585" class="depth_0"><span class="title">인증 번호 생성 2/2</span></a></div>
																			</li>
									<li id="list_8645" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8645" class="depth_0"><span class="title">linux kernel 3.16</span></a></div>
																			</li>
									<li id="list_8644" class="ready depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8644" class="ready depth_0"><span class="title">linux kernel - ion에서 사용된 데이터 heap 소개</span><span class="ready">준비중</span></a></div>
																			</li>
									<li id="list_8647" class="ready depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8647" class="ready depth_0"><span class="title">linux kernel - ion에서 heap을 등록하는 코드</span><span class="ready">준비중</span></a></div>
																			</li>
									<li id="list_8654" class="ready depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8654" class="ready depth_0"><span class="title">linux kernel - ion의 system heap 소개</span><span class="ready">준비중</span></a></div>
																			</li>
									<li id="list_8718" class="private ready depth_0">
										<div class="label"><a href="http://opentutorials.org/module/1329/8718" class="private ready depth_0"><span class="title">구조체 안에 배열 넣기</span><span class="ready">준비중</span></a></div>
																			</li>
								</ol>
							</nav>
						</div>

						<div id="author_identity">
							<h3>생산자</h3>

							<ul>
								<li>
									<div class="profile_image">
										<img class="profile_icon" data-id="9992" src="https://s3-ap-northeast-2.amazonaws.com/opentutorials-user-file/avatar/40/9992.png" alt="">
									</div>
									<div class="name"><strong>gurugio</strong></div>
									<div class="statistics">토픽 59 &nbsp;/&nbsp; 봤어요 0</div>

								</li>
							</ul>
						</div>
					</aside>
					<div class="entry-area">
						<div class="controllers">
							<div class="wrapper">
								<div id="right_ctrs">
<a href="http://opentutorials.org/module/1329/8581/edit" id="edit" class="btn">편집</a><a href="http://opentutorials.org/#" id="delete" class="btn amplify">삭제</a><a href="http://opentutorials.org/module/1329/8581/add" id="add2" class="btn">하위 토픽 추가</a>								</div>
							</div>
						</div>
						<article class="hentry">

						<hgroup>
							<h1 class="entry-title">make - cmake 소개</h1>
							<div class="props">
								<time datetime="">2014-11-10 19:57:40</time>
								<span class="tags">
									| <span class="tag public">공개</span>
									| <span class="tag complete">완료</span>
								</span>
							</div>
						</hgroup>

						<div id="content" class="entry-content">
							<p>&nbsp;</p>

<p>마지막으로 cmake를 소개하면서 빌드 관련 내용을 마무리하겠습니다. make는 사실 과도하게 복잡합니다. 아마 이전 장들을 보시면서 공감하셨을 겁니다. 그런데 과도하게 복잡한 만큼 많이 편리한 것도 아닙니다. 생성될 타겟에 의존적인 파일들을 자동으로 찾아주는 것도 아니고, 빌드 옵션을 자동으로 생성해주는 것도 없고 거의 모든 것을 직접 작성해야합니다. 사실 너무나 오래전에 만들어진 툴이다보니 편의성면에서는 많이 부족한게 사실입니다. 이런 단점들을 극복하고자 make을 자동으로 생성해주는 툴이 많이 나오고 있습니다. 리눅스/유닉스 환경에서는 autotools가 가장 많이 쓰인다고 하지만 autotools자체도 make보다 많이 편리하지는 않고 배우는 것조차 일입니다. 최근에는 autotools의 대안으로 파이썬기반의 SCons나 Waf도 많이 사용되고 있고, 멀티플랫폼을 지원하며 KDE에서 사용되는 것으로 유명해진 cmake도 많이 사용되고 있습니다. 이번 장에서는 configure나 make는 전혀 사용하지 않고 cmake만으로 빌드하고 테스트를 실행해보겠습니다.</p>

<p>cmake를 사용하기 위해서는 CMakeLists.txt라는 파일을 만들어서 cmake에게 명령을 내려야합니다. 우리가 빌드할 파일은 크게 라이브러리 파일과 유닛테스트 파일로 나눌 수 있으므로 CMakeLists.txt src/CMakeLists.txt test/CMakeLists.txt 등으로 3개의 CMakeLists.txt파일을 만들겠습니다.</p>

<p>cmake는 기본적으로 변수를 설정하고 cmake가 제공하는 함수에 설정된 변수를 전달하는 형태가 많이 사용됩니다. 라이브러리에 들어갈 소스 파일들의 이름을 변수에 저장하고 라이브러리를 빌드하는 함수에 이 변수를 전달하면, 자동으로 해당 파일들을 찾아서 라이브러리로 빌드합니다. 실행 파일을 만들 때도 실행 파일에 들어갈 소스 파일 이름과 실행 파일의 이름을 빌드 함수에 전달하면 실행 파일을 빌드합니다. 기본적인 사용법은 아주 간단하므로 예제 파일을 보면서 자세한 설명을 하겠습니다.</p>

<p>가장 먼저 만들 파일은 소스에서 최상위 디렉토리에 있는 CMakeLists.txt입니다. 이 파일은 다른 모든 빌드 과정에서 사용될 변수들을 설정하고 하위 디렉토리에있는 CMakeLists.txt파일을 읽어오는 일을 합니다.</p>

<p>CMAKE_MINIMUM_REQUIRED (VERSION 2.6)<br />
cmake 버전을 2.6이상만 사용합니다. 제가 테스트한 버전은 2.8입니다.</p>

<p>PROJECT (calib_project)<br />
프로젝트 이름입니다. 원하는 이름 아무거나 할 수 있습니다.</p>

<p>SET(CMAKE_VERBOSE_MAKEFILE ON)<br />
SET함수는 변수를 만들거나 변수의 값을 설정하는 일을 합니다. cmake로 빌드를 하면 기본적으로 컴파일 명령이 출력되지 않고 빌드가 완료되었는지만 알려줍니다. 그래서 CMAKE_VERBOSE_MAKEFILE 변수를 ON으로 설정해서 어떤 옵션으로 컴파일되고 있는지 확인할 수 있게합니다.</p>

<p>if (&quot;${build}&quot; MATCHES &quot;debug&quot;)<br />
&nbsp;SET (CMAKE_BUILD_TYPE &quot;debug&quot;)<br />
else (&quot;${build}&quot; MATCHES &quot;debug&quot;)<br />
&nbsp;SET (CMAKE_BUILD_TYPE &quot;release&quot;)<br />
endif (&quot;${build}&quot; MATCHES &quot;debug&quot;)<br />
cmake를 실행할 때 -D옵션으로 cmake에게 변수 값을 전달할 수 있습니다. cmake -D build=debug 형태로 cmake를 실행하면 build라는 이름의 변수를 만들어서 cmake에게 전달할 수 있습니다. CMAKE_BUILD_TYPE 변수는 cmake에 내장된 변수입니다. cmake는 이 변수의 값을 확인해서 디버그 모드로 빌드할 것인지 릴리즈 모드로 빌드할 것인지를 판단합니다.</p>

<p>if가 처음 사용되었으므로 간단하게 설명하겠습니다. cmake에서는 문자열의 비교를 MATCHES로 처리합니다. 그리고 else와 endif에 if에서 사용된 표현식을 다시한번 써줍니다. 그 외에는 기본적인 if-else와 같습니다.</p>

<p>ADD_DEFINITIONS(-DCALIB_CFG_BUILD_MODE=&quot;${CMAKE_BUILD_TYPE}&quot;)<br />
컴파일 옵션에 추가될 매크로 정의는 ADD_DEFINITIONS함수로 지정합니다. src/build_info.c에 CALIB_CFG_BUILD_MODE값이 필요하므로 매크로 상수를 만들었습니다.</p>

<p>if (&quot;${bit}&quot; MATCHES &quot;32&quot;)<br />
&nbsp;ADD_DEFINITIONS(-DCALIB_CFG_COMPILE_BIT=32 -m32)<br />
&nbsp;SET (CMAKE_EXE_LINKER_FLAGS -m32)<br />
else (&quot;${bit}&quot; MATCHES &quot;32&quot;)<br />
&nbsp;ADD_DEFINITIONS(-DCALIB_CFG_COMPILE_BIT=64 -m64)<br />
&nbsp;SET (CMAKE_EXE_LINKER_FLAGS -m64)<br />
endif (&quot;${bit}&quot; MATCHES &quot;32&quot;)<br />
빌드 비트를 확인하는 부분입니다. 빌드 모드와 마찬가지로 cmake의 실행 옵션으로 bit변수에 값을 설정합니다. 이 값에 따라 컴파일 비트와 링크 비트를 설정합니다. ADD_DEFINITIONS 함수는 원래 매크로 상수를 추가하는 함수인데 편의상 컴파일 옵션도 이 함수를 이용해서 추가했습니다. CMAKE_EXE_LINKER_FLAGS는 실행 파일을 만들 때 링커가 사용할 옵션이 저장된 변수입니다. SET 함수를 사용해서 -m32나 -m64 옵션을 추가합니다.</p>

<p>ADD_DEFINITIONS(-Wall -DCALIB_CFG_OS=&quot;${CMAKE_SYSTEM_NAME}&quot; -DCALIB_CFG_CPU=&quot;${CMAKE_SYSTEM_PROCESSOR}&quot;)<br />
CMAKE_SYSTEM_NAME과 CMAKE_SYS_PROCESSORS은 각각 운영체제 이름과 프로세서 정보를 가지고있는 내장 변수입니다. configure를 사용하지 않는 대신에 cmake가 가진 정보를 사용합니다.</p>

<p>ADD_SUBDIRECTORY(src)<br />
src/CMakeLists.txt를 처리합니다.</p>

<p>ADD_SUBDIRECTORY(test)<br />
test/CMakeLists.txt를 처리합니다.</p>

<p><br />
이제 소스를 빌드해서 라이브러리를 만드는 src/CMakeListst.txt를 분석하겠습니다.</p>

<p>SET (LIBRARY_OUTPUT_PATH ../lib)<br />
빌드된 라이브러리가 저장될 디렉토리입니다.</p>

<p>INCLUDE_DIRECTORIES (../include)<br />
소스 빌드에 필요한 헤더 파일이 저장된 디렉토리입니다.</p>

<p>SET (LIBSRCS sys_info.c build_info.c)<br />
소스 파일의 리스트입니다.</p>

<p>CMAKE_MINIMUM_REQUIRED (VERSION 2.6)<br />
PROJECT (calib_project)</p>

<p># set dir to store library<br />
SET (LIBRARY_OUTPUT_PATH ../lib)</p>

<p># set dir for header<br />
INCLUDE_DIRECTORIES (../include)</p>

<p># sources<br />
SET (LIBSRCS sys_info.c build_info.c)</p>

<p># build libcalib.a with LIBSRCS sources<br />
ADD_LIBRARY (calib STATIC ${LIBSRCS})</p>

<p>&nbsp;</p>

<p>라이브러리를 빌드하는 함수 ADD_LIBRARY를 호출합니다. calib은 라이브러리의 이름이고 STATIC은 정적 라이브러리로 빌드하라는 의미입니다. SHARED로 지정하면 공유라이브러리를 빌드합니다.</p>

<p><br />
다음은 유닛테스트를 빌드하는 test/CMakeLists.txt입니다.</p>

<p>ENABLE_TESTING ()<br />
cmake는 유닛테스트를 위해 ctest라는 독립적인 툴을 가지고있습니다. cmake로 실행파일을 빌드하면 ctest로 실행과 각종 테스트를 진행하게됩니다. ctest를 사용하겠다는 의미로 ENABLE_TESTING 함수를 호출합니다.</p>

<p>INCLUDE_DIRECTORIES (../include)<br />
헤더 파일의 디렉토리 설정입니다.</p>

<p>ADD_EXECUTABLE (test_build_info test_build_info.c)<br />
ADD_EXECUTABLE은 어떤 소스를 가지고 어떤 실행 파일을 만들지를 지정합니다. test_build_info.c를 가지고 test_build_info 실행파일을 빌드합니다.&nbsp;</p>

<p>TARGET_LINK_LIBRARIES (test_build_info calib)<br />
test_build_info를 빌드할 때 calib라이브러리를 링크합니다.</p>

<p>ADD_EXECUTABLE (test_build_info test_build_info.c)<br />
TARGET_LINK_LIBRARIES (test_build_info calib)<br />
test_build_info의 빌드와 동일합니다. test_sys_info.c 소스와 calib 라이브러리를 가지고 test_sys_info라는 실행 파일을 빌드합니다.</p>

<p>ADD_TEST (unittest1 test_build_info)<br />
ADD_TEST (unittest2 test_sys_info)<br />
ADD_TEST함수는 ctest가 실행할 유닛테스트 파일을 지정합니다. 첫번째 인자는 테스트의 이름이고 두번째 인자는 실행 파일입니다.</p>

<p><br />
모든 CMakeLists.txt파일을 작성했으면 다음 명령을 실행해서 Makefile을 만들고 빌드를 실행합니다.</p>

<p>$ cmake -D build=debug -D bit=64 CMakeLists.txt&nbsp;<br />
$ make</p>

<p>유닛테스트를 실행하기 위해서는 cmake test 명령을 내리거나 ctest를 실행하면 됩니다.</p>

<p>$ cmake test<br />
$ ctest</p>

<p>cmake test를 실행하면 유닛테스트가 정상적으로 실행되었다는 메시지만 출력됩니다. 유닛테스트에서 출력한 메시지를 확인하고 싶다면 ctest -V나 ctest --debug 명령을 실행하면 됩니다. ctest는 실행 파일의 최종 반환값이 0이면 테스트 성공으로 인식하고 그 외의 값을 반환하면 실패로 인식합니다.</p>

<p>CMakeLists.txt를 다시 만들었을때는 CMakeCache.txt를 지우고 cmake를 다시 실행합니다.</p>

<p>$ rm CMakeCache.txt</p>
						</div>

						</article>
					<div id="social_group">
						<ul>
							<li id="facebook_like"><div class="fb-like" data-send="true" data-layout="button_count" data-width="450" data-height="20" data-show-faces="false"></div></li>
							<li id="readit">
								<a class="marking" href="#" data-mark-id="0"><span class="action">봤어요</span> (<span class="count">0</span>명)</a>
							</li>
							<li id="topic_navigator">
								<ul>
									<li class="prev"><a href="http://opentutorials.org/module/1329/8580">이전</a></li><li class="next"><a href="http://opentutorials.org/module/1329/8583">다음</a></li>
								</ul>
							</li>
						</ul>
					</div>

					<div id="fb-root"></div>
					<script>
						(function(d, s, id) {
							var js, fjs = d.getElementsByTagName(s)[0];
							if (d.getElementById(id)) return;
							js = d.createElement(s); js.id = id;
							js.src = "//connect.facebook.net/ko_KR/all.js#xfbml=1";
							js.async = true;
							fjs.parentNode.insertBefore(js, fjs);
						}(document, 'script', 'facebook-jssdk'));

						function doMarking() {
							var marker = $('#social_group a.marking');
							var markType = marker.hasClass('marked') ? 'unmark' : 'marking';
							ga('send', 'event', 'Participation', 'mark_'+markType, path_context+(topic_id ? '/'+topic_id : '')+', '+document.title , {useBeacon:true});
							$.ajax({
								url: "http://opentutorials.org/module/1329/8581/marking_ajax",
								data: {'type':'saw', 'marktype':markType, 'mark_id':marker.data('mark-id')},
								type: 'post',
								dataType: 'json',
								success: function (response) {
									if (response.result) {
										if (response.data.status == 'unmarked'){
											marker.removeClass('marked');
											marker.find('span.action').html("봤어요");
											var count = Number(marker.find('span.count').text());
											marker.find('span.count').text(count - 1);
										} else {
											marker.addClass('marked');
											marker.find('span.action').html("봤어요 취소");
											var count = Number(marker.find('span.count').text());
											marker.find('span.count').text(count + 1);
										}

										marker.data('mark-id', response.data.id);
									} else {
										if (response.errorCode == 1) {
											var dialog = LoginDialogManager.get();
											dialog.show(true);
										} else {
											xalert(NULL, response.msg, {modal:true});
										}
									}
								}
							})
						}

						function handleMarking(event) {
							event.preventDefault();
							doMarking();
						}

						$('#readit a.marking').click(handleMarking);
					</script>
<div id="comment" data-role="collapsible">
	<h3>댓글</h3>

	<form id="comment_new_form" method="post" action="http://opentutorials.org/comment/add_ajax" data-ajax="true">
		<div class="profile_image">
			<img src="https://s3-ap-northeast-2.amazonaws.com/opentutorials-user-file/avatar/40/9992.png" alt="">
		</div>

		<div class="form_wrapper">
			<dl class="comment_form_content">
				<dt>댓글 본문</dt>
				<dd>
					<div id="reply_indicator">
						<a>리체님의 댓글에 대한 답글입니다.</a>
						<input type="hidden" name="parent" value="">
						<a class="btn btn_unchain" href="#">삭제</a>
					</div>
					<textarea name="cmt_content"></textarea>
				</dd>
			</dl>
			<div class="buttons">
				<input type="hidden" name="course_id" value="0">
				<input type="hidden" name="module_id" value="1329">
				<input type="hidden" name="topic_id" value="8581">

				<button type="submit"><span>댓글 올리기</span></button>
			</div>
		</div>
	</form>
	
	<ol id="comment_list">
		<li id="comment24309" data-id="24309">
			<div class="profile_image">
				<img class="profile_icon" data-id="9992" src="https://s3-ap-northeast-2.amazonaws.com/opentutorials-user-file/avatar/40/9992.png" alt="">
			</div>


			<div class="name time">
				<strong>gurugio</strong><a href="#comment24309" name="comment24309"><time datetime="2016-04-05 05:42:46">한 달 전</time></a>
			</div>

			<div class="comment_content">
				저도 안쓴지 너무 오래돼서 기억이 안나네요. 강좌에 써진대로 CMakeCache.txt를 지우고 cmake를 해보시면 어떻게 되나요?			</div>

			<dl class="parents">
				<dt><a href="#" data-parent="24136">대화보기</a><span></span></dt>
				<dd>
					<ul></ul>
				</dd>
			</dl>
			<div class="buttons">
				<a class="icon block reply" href="#"><span class="ico ico_reply"></span> 답글</a> <a class="icon block edit" href="#"><span class="ico ico_modify"></span> 수정</a> <a class="icon block delete" href="#"><span class="ico ico_close"></span> 삭제</a>
			</div>
		</li>
		<li id="comment24136" data-id="24136">
			<div class="profile_image">
				<img class="profile_icon" data-id="0" src="/static/img/common/40_profile.png" alt="">
			</div>


			<div class="name time">
				<strong>python</strong><a href="#comment24136" name="comment24136"><time datetime="2016-03-31 10:17:28">한 달 전</time></a>
			</div>

			<div class="comment_content">
				cmake 했던것을 초기화 하려면 어떻게 해야 하나요? <br />
cmake 해서 make했다가 에러가 나서 cmake의 옵션을 다르게 해서 다시 make 하려고 합니다.			</div>

			<div class="buttons">
				<a class="icon block reply" href="#"><span class="ico ico_reply"></span> 답글</a> <a class="icon block delete" href="#"><span class="ico ico_close"></span> 삭제</a>
			</div>
		</li>
		<li id="comment23849" data-id="23849">
			<div class="profile_image">
				<img class="profile_icon" data-id="0" src="/static/img/common/40_profile.png" alt="">
			</div>


			<div class="name time">
				<strong>길똥고</strong><a href="#comment23849" name="comment23849"><time datetime="2016-03-22 15:38:26">한 달 전</time></a>
			</div>

			<div class="comment_content">
				존 자료 감사합니다.<br />
<br />
좀 퍼가도 될런지요?<br />
<br />
<a href="http://cafe.naver.com/iphonediy">http://cafe.naver.com......diy</a><br />
<br />
미리 감사 드리며~			</div>

			<div class="buttons">
				<a class="icon block reply" href="#"><span class="ico ico_reply"></span> 답글</a> <a class="icon block delete" href="#"><span class="ico ico_close"></span> 삭제</a>
			</div>
		</li>
		<li id="comment15331" data-id="15331">
			<div class="profile_image">
				<img class="profile_icon" data-id="0" src="/static/img/common/40_profile.png" alt="">
			</div>


			<div class="name time">
				<strong>지니</strong><a href="#comment15331" name="comment15331"><time datetime="2015-06-15 21:28:29">11개월 전</time></a>
			</div>

			<div class="comment_content">
				else (&quot;${build}&quot; MATCHES &quot;debug&quot;)가 아니라 else (&quot;${build}&quot; MATCHES &quot;release&quot;) 아닌가요?			</div>

			<div class="buttons">
				<a class="icon block reply" href="#"><span class="ico ico_reply"></span> 답글</a> <a class="icon block delete" href="#"><span class="ico ico_close"></span> 삭제</a>
			</div>
		</li>
		<li id="comment10939" data-id="10939">
			<div class="profile_image">
				<img class="profile_icon" data-id="9992" src="https://s3-ap-northeast-2.amazonaws.com/opentutorials-user-file/avatar/40/9992.png" alt="">
			</div>


			<div class="name time">
				<strong>gurugio</strong><a href="#comment10939" name="comment10939"><time datetime="2014-11-10 19:58:11">1년 전</time></a>
			</div>

			<div class="comment_content">
				<a href="https://github.com/gurugio/calib_book/tree/master/ch02/ch02.3/ch02.3.5">https://github.com......3.5</a><br />
근데 cmake도 이제 흘러가고 요즘엔 scons가 대세인듯 합니다.			</div>

			<div class="buttons">
				<a class="icon block reply" href="#"><span class="ico ico_reply"></span> 답글</a> <a class="icon block edit" href="#"><span class="ico ico_modify"></span> 수정</a> <a class="icon block delete" href="#"><span class="ico ico_close"></span> 삭제</a>
			</div>
		</li>
	</ol>

	<div id="cmt_more" class="hidden">
		<a href="#"><span>더 보기</span></a>
	</div>
</div>					</div>
					<div style="clear: both"></div>
				
				
					<div id="footer">
						<a href="http://opentutorials.org/home/viewmode_mobile?returnURL=http%3A%2F%2Fopentutorials.org%2Fmodule%2F1329%2F8581">모바일 버전</a>
					</div>

					<div class="clear"></div>
				</div>
			</div>
		</div>
	</div>

	<div id="author_balloon">
		<div class="box">
			<img class="avatar" src="http://opentutorials.org/static/img/common/blank.gif" alt="" style="background-image: none">
		</div>

		<div class="header">
			<strong>graphittie</strong>
			<a href="#">자세히 보기</a>
		</div>

		<div class="body">
			<ul id="statistics">
				<li class="topic"><span class="text"><i></i>토픽</span> <span class="count">0</span></li>
				<li class="module"><span class="text"><i></i>모듈</span> <span class="count">0</span></li>
				<li class="course"><span class="text"><i></i>코스</span> <span class="count">0</span></li>
				<li class="readit"><span class="text"><i></i>봤어요</span> <span class="count">0</span></li>
				<li class="comment"><span class="text"><i></i>댓글</span> <span class="count">0</span></li>
				<li class="hof"><span class="text"><i></i>명예의 전당</span> <span class="count">0</span></li>
			</ul>
		</div>
	</div>

	<div id="holder">

	</div>

<script src="/static/js/desktop/comment.js?1"></script>
<script src="/static/js/desktop/script.js?1"></script>
	<script>
		if (DOMLoader.callbacks.length) {
			for (var i=0, max=DOMLoader.callbacks.length; i<max; i++)
				DOMLoader.callbacks[i]();
		}

	</script>
	<script>
	if(window.google_analytics_page_set_object) {
		ga('set', google_analytics_page_set_object);
	};
	if(ga) {
		ga('send', 'pageview');
	}
</script>
</body>
</html>
