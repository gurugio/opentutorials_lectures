<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="Author" content="OpenTutorials">
	<meta http-equiv="x-ua-compatible" content="IE=EDGE">
	<meta name="viewport" content="width=1280">
	<title>16비트 32비트 64비트 - 요즘도 쓰는 언어 어셈블리</title>
    <link rel="apple-touch-icon" sizes="57x57" href="/static/img/common/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/img/common/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/img/common/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/img/common/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/img/common/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/img/common/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/img/common/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/img/common/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/img/common/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/static/img/common/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/img/common/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/img/common/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/img/common/favicon/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/static/img/common/favicon/apple-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

	<link rel="icon" href="/static/img/common/favicon/favicon-32x32.png" type="image/x-icon">
	<meta property="og:title" content="16비트 32비트 64비트 - 요즘도 쓰는 언어 어셈블리">
	<meta property="og:type" content="university">
	<meta property="og:url" content="http://opentutorials.org/module/2004/11699">
	<meta property="og:image" content="">
	<meta property="og:site_name" content="요즘도 쓰는 언어 어셈블리">
	<meta property="fb:admins" content="1015740740">
	<!--[if lt IE 9]>
	<script>
		document.createElement('header');
		document.createElement('nav');
		document.createElement('section');
		document.createElement('article');
		document.createElement('aside');
		document.createElement('footer');
		document.createElement('hgroup');
	</script>
	<![endif]-->
	<script type="text/javascript">
		var outpath = '/admin/module_topic_edit/2004/11699';
		var path_context = 'module/2004';
		var user_id = 9992;
		var topic_id = 11699;
		var base_url = "http://opentutorials.org/";
		var file_url = "/static/";
		var user_file_url = "https://s3-ap-northeast-1.amazonaws.com/opentutorialsfile/";
		var hash = window.location.hash == undefined ? '' : window.location.hash.substr(1);
		var cmt_paging_unit = 50;
		var autosave_interval = 1;
		var CKEDITOR_BASEPATH = base_url + 'static/js/common/ckeditor/';
	</script>
<link href="/static/css/common/reset.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/common/tipTip.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/common.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/menus.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/style.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/content.css?1" rel="stylesheet" type="text/css" media="all" />
<link href="/static/css/desktop/everystudy.css?1" rel="stylesheet" type="text/css" media="all" />
<script src="/static/js/common/jquery/jquery-1.8.3.custom.min.js?1"></script>
<script src="/static/js/common/jquery.ui/1.9.2/js/jquery-ui-1.9.2.custom.min.js?1"></script>
<script src="/static/js/common/jquery.browser.min.js?1"></script>
<script src="/static/js/common/jquery.mousewheel.js?1"></script>
<script src="/static/js/common/jquery.tipTip.min.js?1"></script>
<script src="/static/js/common/spin.min.js?1"></script>
<script src="/static/js/common/common.js?1"></script>
<script src="/static/js/desktop/controls.js?1"></script>
<script src="/static/js/common/jquery.mjs.nested-sortable.js?1"></script>
<script src="/static/js/desktop/topic-ordering.js?1"></script>
<script src="/static/js/common/raphael/raphael.js?1"></script>
<script src="/static/js/desktop/everystudy.js?1"></script>
<script src="/static/js/desktop/revision.js?1"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-25079901-2', 'auto');
  ga('require', 'displayfeatures');
</script>
</head>
<body id="topic_index" class="module view sidebar everystudy logged_in controls revision">
	<!-- div class="devwarning" onclick="$('.devwarning, .devwarning_spacer').remove();">개발서버를 수정하고 있습니다</div -->

	<div id="whole_wrapper">
		<div class="head">
			<header>
				<hgroup>
					<p class="title"><a href="http://opentutorials.org/module/2004">요즘도 쓰는 언어 어셈블리</a></p>
					<p class="subtitle"><small>x86_64, AMD64, 64bit</small></p>

					<div class="title">
						<a class="icon bg" href="http://opentutorials.org/module/2004" title="x86_64, AMD64, 64bit">요즘도 쓰는 언어 어셈블리<span class="ico ico_public"> </span></a>
						<summary>x86_64, AMD64, 64bit</summary>
					</div>
					<!-- small class="return">&dash; <a href="http://opentutorials.org/module">모듈 목록으로 돌아가기</a></small -->
				</hgroup>

				<ul id="left_nav">
					<li id="to_home"><a class="title" href="http://opentutorials.org/"><span>Open</span>tutorials.org</a></li> 
					<li id="btn_create_module"><a class="title" href="http://opentutorials.org/admin/module_basic/0">모듈 만들기</a>
						<form id="new_module_layer" class="submenu layerbox" method="post" action="http://opentutorials.org/admin/module_basic_ajax/0">
							<div class="pin pin_big_top"> </div>
							<div class="wrapper table">
								<div class="head">
									<strong class="icon"><span class="ico_module"></span>새 모듈 만들기</strong>
									<button class="btn_close"><span>닫기</span></button>									
								</div>
								<div class="body">
									<dl>
										<dt><label for="new_module_title">제목</label></dt>
										<dd><input type="text" id="new_module_title" name="title" class="text"/></dd>
									</dl>
									<dl>
										<dt><label for="new_module_cover">커버 내용</label></dt>
										<dd><textarea id="new_module_cover" name="description"></textarea></dd>
									</dl>
									<dl class="new_license">
										<dt><label for="new_license">라이센스</label></dt>
										<dd>
											<input type="checkbox" class="chk" id="new_license" name="license" value="1"/><label for="new_license">오픈 라이센스 사용에 동의합니다.</label>
										</dd>
									</dl>
								</div>
								<div class="tail">
									<button type="submit" class="btn btn_submit">저장</button>
								</div>

								<input type="hidden" name="summary" value=""/>
								<input type="hidden" name="public" value="public"/>
								<input type="hidden" name="skip_cover" value="0"/>
								<input type="hidden" name="cominfo" value=""/>
								<input type="hidden" name="everystudy_label" value=""/>
								<input type="hidden" name="marking_label" value=""/>
							</div>
						</form>
					</li>
					<li id="notify_count">
						<a id="notify_counter" class="title" href="#"><span class="label">알림</span> <span class="count">0</span></a>
						<div id="notifier_layer" class="submenu layerbox">
							<div class="triangle">
								<div class="pin pin_big_top">

								</div>
							</div>
							<div class="wrapper table">
								<div class="head">
									<a href="#" data-type="all" class="notify_cate selected">전체</a> | <a href="#" data-type="comment" class="notify_cate">댓글</a> | <a data-type="mark_topic_marked" class="notify_cate" href="#">봤어요</a>
									<button class="btn_close cancel"><span>닫기</span></button>
								</div>
								<div class="body scrollbox">
									<ul>
										<li class="empty"></li>
									</ul>
									<a class="more_notifier" href="#">더 불러오기</a>
								</div>
								<div class="tail">
								</div>
							</div>	
						</div>
					</li>
				</ul>			<nav id="right_nav">
				<ul>

					<li id="settings">
						<span class="title">gurugio</span>
						<div id="settings_submenu" class="submenu layerbox">
							<div class="pin pin_big_top"></div>
							<div class="table">
								<menu>
									<li><a href="http://opentutorials.org/profile/9992">프로필 보기</a></li>
									<li><a href="/admin/module_topic_edit/2004/11699">관리자</a></li>
									<li><a href="http://opentutorials.org/module/180">도움말</a></li>
									<li><a href="http://opentutorials.org/auth?mode=logout&returnURL=module/2004/11699" id="logout">로그아웃</a></li>
								</menu>
							</div>
						</div>
					</li>
					<li id="activity">
						<span class="title">참여활동</span>
						<div id="activity_submenu" class="submenu layerbox">
							<div class="pin pin_big_top"></div>
							<table>
								<thead>
									<tr>
										<th class="everystudy"><span class="inner">공동공부</span></th>
										<th class="marking"><span class="inner">봤어요</span> <span class="subtitle">누적봤어요 <span class="count">0</span>번</span></th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td class="everystudy">
											<div id="p_everystudy_nest" class="scrollbox"></div>
										</td>
										<td class="marking">
											<div id="p_marking_nest" class="scrollbox"> </div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</li>
					<li id="my_content">
						<span class="title">내 컨텐츠</span>
						<div id="my_content_submenu" class="submenu layerbox">
							<div class="pin pin_big_top"></div>
							<table>
								<thead>
									<tr>
										<th class="course"><span class="inner">코스</span> <div class="controls"><a class="setting" href="http://opentutorials.org/admin/course_basic">설정</a><a class="add" href="http://opentutorials.org/admin/course_basic/0">추가</a></div></th>
										<th class="module"><span class="inner">모듈</span> <div class="controls"><a class="setting" href="http://opentutorials.org/admin/module_basic">설정</a><a class="add" href="http://opentutorials.org/admin/module_basic/0">추가</a></div></th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td class="course">
											<div id="p_course_nest" class="scrollbox"></div>
										</td>
										<td class="module">
											<div id="p_module_nest" class="scrollbox"></div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</li>
				</ul>
			</nav>
			</header>

</div>		<div id="body">
			<div id="breadcrumb">
				<div class="wrapper">

					<span id="study_count">
						<a id="btn_everystudy" href="#everystudy" mode="module">
							<span class="label">공동공부</span> <small>(<span class="count">4</span>명)</small>
						</a>
					</span>

				</div>
			</div>

			<div id="cols">
				<div class="wrapper">

					<aside>
						<div class="controllers">
							<div class="wrapper">
								<div id="left_ctrs">
									<a href="http://opentutorials.org/module/2004/add" id="add" class="btn">토픽 추가</a><a href="http://opentutorials.org/#topic_move" id="order" class="btn">토픽 순서</a>								</div>
							</div>
						</div>
						<div id="topic_list_index" class="index">
								<div class="module_cover">
									<a href="http://opentutorials.org/module/2004">커버 페이지</a>
								</div>
							<h2>토픽 목록</h2>

							<nav class="sub_nav">
								<ol id="topic_list_tree" class="no_draggable">
									<li id="list_11691" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11691" class="depth_0"><span class="title">요즘시대에 어셈블리가 필요한가?</span></a></div>
																			</li>
									<li id="list_11692" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11692" class="depth_0"><span class="title">좋은 자료들</span></a></div>
																			</li>
									<li id="list_11696" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11696" class="depth_0"><span class="title">nasm 어셈블러로 Hello, world! 출력하기</span></a></div>
																			</li>
									<li id="list_11710" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11710" class="depth_0"><span class="title">gdb로 어셈블리 실행하기</span></a></div>
																			</li>
									<li id="list_11711" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11711" class="depth_0"><span class="title">gdb로 어셈블리 코드 디버깅하기</span></a></div>
																			</li>
									<li id="list_11712" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11712" class="depth_0"><span class="title">분량조절실패로 쓰는 gdb로 어셈블리 코드 디버깅하기 2부</span></a></div>
																			</li>
									<li id="list_11699" class="selected depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11699" class="selected depth_0"><span class="title">16비트 32비트 64비트</span></a></div>
																			</li>
									<li id="list_11702" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11702" class="depth_0"><span class="title">64비트 함수 호출 규약</span></a></div>
																			</li>
									<li id="list_11698" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11698" class="depth_0"><span class="title">gcc 최적화 옵션 실험</span></a></div>
																			</li>
									<li id="list_11700" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11700" class="depth_0"><span class="title">리눅스 커널에있는 어셈블리 코드 소개</span></a></div>
																			</li>
									<li id="list_11695" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11695" class="depth_0"><span class="title">Protected mode와 Long mode</span></a></div>
																			</li>
									<li id="list_11697" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11697" class="depth_0"><span class="title">리눅스 커널 디버깅</span></a></div>
																			</li>
									<li id="list_11701" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11701" class="depth_0"><span class="title">MMX 프로그래밍 소개</span></a></div>
																			</li>
									<li id="list_11817" class="depth_0">
										<div class="label"><a href="http://opentutorials.org/module/2004/11817" class="depth_0"><span class="title">리눅스 커널에서 ACCESS_ONCE 이해하기 (volatile 키워드)</span></a></div>
																			</li>
								</ol>
							</nav>
						</div>

						<div id="author_identity">
							<h3>생산자</h3>

							<ul>
								<li>
									<div class="profile_image">
										<img class="profile_icon" data-id="9992" src="https://s3-ap-northeast-2.amazonaws.com/opentutorials-user-file/avatar/40/9992.png" alt="">
									</div>
									<div class="name"><strong>gurugio</strong></div>
									<div class="statistics">토픽 59 &nbsp;/&nbsp; 봤어요 0</div>

								</li>
							</ul>
						</div>
					</aside>
					<div class="entry-area">
						<div class="controllers">
							<div class="wrapper">
								<div id="right_ctrs">
<a href="http://opentutorials.org/module/2004/11699/edit" id="edit" class="btn">편집</a><a href="http://opentutorials.org/#" id="delete" class="btn amplify">삭제</a><a href="http://opentutorials.org/module/2004/11699/add" id="add2" class="btn">하위 토픽 추가</a><a id="version" class="btn" href="http://opentutorials.org/module/2004/11699/revision">버전(<span class="count">2</span>)</a>								</div>
							</div>
						</div>
						<article class="hentry">

						<hgroup>
							<h1 class="entry-title">16비트 32비트 64비트</h1>
							<div class="props">
								<time datetime="">2016-02-16 06:39:14</time>
								<span class="tags">
									| <span class="tag public">공개</span>
									| <span class="tag complete">완료</span>
								</span>
							</div>
						</hgroup>

						<div id="content" class="entry-content">
							<p>대뜸 64비트 어셈블리로 코딩하고 디스어셈블한 소스보면서 디버깅하면서 정신이 없었을것 같습니다. 이쯤해서 약간만 정리하고 넘어가겠습니다.</p>

<p>64비트의 특징은 사실 위키피디아에 너무나 잘 나와있습니다.&nbsp;</p>

<p>https://en.wikipedia.org/wiki/X86-64#AMD64</p>

<p>이전에 말씀드린대로 x86_64에 대해서 위키피디아를 찾아보면 몇가지 항목들이 나오는데 AMD64가 우리가 현재 쓰는 일반 피시의 아키텍쳐입니다.&nbsp;</p>

<p>위키피디아에서 중요한 내용만 가져와보면</p>

<ul>
	<li>인텔이 IA-64 (Itanium으로 알려진) 아키텍처를 한답시고 삽질할 때&nbsp;AMD가 AMD64를 만들어서 산업표준이 되었다.</li>
	<li>64비트 레지스터를 쓰고 64비트 주소를 쓸 수 있다. 32비트 주소를 쓰면 메인메모레를 4GB까지 쓸 수 있습니다. 약간의 기술을 더해서 더 큰 메모리를 쓸 수 있도록 하긴 했었지만요. 64비트가 되면 2의 64승까지 주소 지정을 할 수 있으니까 어마어마한 메모리를 쓸 수 있게 됩니다.</li>
	<li>32비트 아키텍쳐는&nbsp;&nbsp;eax, ebx, ecx, edx, ebp, esp, esi, edi 총 8개의 범용 레지스터가 있는데</li>
	<li>64비트는&nbsp;rax, rbx, rcx, rdx, rbp, rsp, rsi, rdi, r8, r9, r10, r11, r12, r13, r14, r15 총 16개의 레지스터를 가지도록 만들었다.</li>
	<li>XMM레지스터 갯수가 32비트는 8개, 64비트는 16개이다.</li>
	<li>이론상 가능한 주소 범위가 2의 64승이지만 현재 나온 프로세서들은 가상주소로 48비트를 사용하고, 물리주소로 48비트를 사용한다. 이 말의 뜻은 실제 장착할 수 있는 메모리가 48비트, 256TB라는 뜻입니다. 그리고 운영체제 위에서 동작하는 프로그램이 가질 수 있는 주소의 범위도 256TB라는 것이구요. 256TB 이상의 메모리가 필요한 소프트웨어를 만들고싶으신 분은 몇년 더 기다리셔야겠네요.</li>
	<li>32비트 아키텍쳐보다 보안에 필요한 기능이 추가되었다.</li>
</ul>

<p>대략 이정도입니다. 그 아래 페이지 테이블과&nbsp;Long mode라는게 나오는데 이건 다음에 알아보고, 지금은 Canonical address space라는걸 이해해야합니다. 아주 중요한 개념입니다.</p>

<p>64비트는 rip 레지스터가 64비트니까 당연히 64비트 주소를 쓸 수 있고, 주소 범위가 0부터 0xFFFFFFFFFFFFFFFF 가 될 수 있어야 합니다. F가 하도 많아서 몇개인지 잘 안보이실텐데 F가 16개입니다. 8개면 32비트, 4개면 16비트, 2개면 8비트입니다.</p>

<p>그런데 사실은 그렇게 큰 주소공간을 허용하지 않습니다. 왜냐면 64비트 주소 공간을 페이지 갯수로 따지면 한 페이지가 4KB라고 생각해보면 2^64 / 2^12 = 2^52 개의 페이지가 됩니다. 이걸 커버할 수 있는 페이지 테이블을 만드려니 페이지 테이블만 만드는데 들어가는 메모리가 너무 커지는 문제가 생깁니다.</p>

<p>페이지 테이블을 아직 모르신다면 이렇게 생각하시면 됩니다.&nbsp;간단하게 메모리를 관리하기 위한 데이터 구조의 배열을 생각해 보겠습니다. 운영체제는 현재 시스템에 얼마만큼의 메모리가 있고 각 페이지 단위로 어떤 페이지가 사용중이고 어떤 페이지는 쓸 수 있는 상태인지 등등 그런 상태 정보를 가지고 있어야 합니다. 그래야 페이지 단위로 할당해줄 수 있겠지요. 만약 64비트 주소 공간을 모두 쓴다고하고 데이터 구조의 크기가 20바이트라고 하면 전체 메모리를 관리하기 위해서 20바이트 X 2^52 만큼의 &nbsp;메모리가 필요합니다.</p>

<p>메모리를 관리하기 위한 메모리만 많이 잡아먹는게 아니라, 워낙 방대한 주소가 사용될 수 있으니까 캐시에 주소를 기억하는 공간도 커져야하고 하드웨어적인 문제 소프트웨어적인 문제 복잡해집니다. 그리고 아무리 생각해봐도 당분간은 그렇게 큰 주소공간을 필요로하지도 않습니다. 아무리 슈퍼컴퓨터라고해도 하나의 머신이&nbsp;256TB의 메모리를 가지고 있다는 이야기는 못들었습니다. 있다고해도 일반적인 용도는 아니겠지요.</p>

<p>그래서 결국은 64비트 전체를 다 쓰는게 아니라 위에서 말씀드린대로 어느정도 타협을 해서 이만하면 넉넉하다라고 결정한게 48비트입니다. 주소 지정은 48비트만 하고 그 위 비트들은 47번 비트를 그대로 복사되도록 하드웨어적으로 만들어놨습니다. 말로는 잘 이해가 안되실텐데 이렇게 테이블을 만들어보겠습니다.</p>

<p>0000 0000 0000 0000&nbsp;<span style="font-size: 13.2px; line-height: 23.76px;">0000 0000 0000 0000&nbsp;0000 0000 0000 0000&nbsp;</span><span style="font-size: 13.2px; line-height: 23.76px;">0000 0000 0000 0000</span></p>

<p>이게 64비트입니다. 0이 64개입니다.</p>

<p style="font-size: 13.2px; line-height: 23.76px;">0000 0000 0000 0000&nbsp;<span style="font-size: 13.2px; line-height: 23.76px;">0000 0000 0000 0000&nbsp;0000 0000 0000 0000&nbsp;</span><span style="font-size: 13.2px; line-height: 23.76px;">0000 0000 0000 0001</span></p>

<p style="font-size: 13.2px; line-height: 23.76px;">이제 주소값이 1번입니다.</p>

<p style="font-size: 13.2px; line-height: 23.76px;">0000 0000 0000 0000&nbsp;<span style="font-size: 13.2px; line-height: 23.76px;">0000 0000 0000 0000&nbsp;0000 0000 0000 0000&nbsp;</span><span style="font-size: 13.2px; line-height: 23.76px;">0000 0000 0000 0010</span></p>

<div>
<p style="font-size: 13.2px; line-height: 23.76px;">0000 0000 0000 0000&nbsp;<span style="font-size: 13.2px; line-height: 23.76px;">0000 0000 0000 0000&nbsp;0000 0000 0000 0000&nbsp;</span><span style="font-size: 13.2px; line-height: 23.76px;">0000 0000 0000 0011</span></p>

<p style="font-size: 13.2px; line-height: 23.76px;"><span style="font-size: 13.2px; line-height: 23.76px;">......</span></p>

<p style="font-size: 13.2px; line-height: 23.76px;">계속 주소 값이 증가됩니다.</p>

<p style="font-size: 13.2px; line-height: 23.76px;">0000 0000 0000 0000 0111<span style="font-size: 13.2px; line-height: 23.76px;">&nbsp;1111 1111 1111&nbsp;1111 1111 1111 1111 1111</span><span style="font-size: 13.2px; line-height: 23.76px;">&nbsp;1111 1111 1111</span></p>

<div>이렇게되면 0비트부터 46번 비트까지가 1인, 0x0000 7FFF FFFF FFFF 값이 됩니다. 여기서 주소를 1만 더 올리면</div>

<div>
<p style="font-size: 13.2px; line-height: 23.76px;">1111 1111 1111 1111 1000<span style="font-size: 13.2px; line-height: 23.76px;">&nbsp;0000 0000 0000&nbsp;0000 0000 0000 0000 0000</span><span style="font-size: 13.2px; line-height: 23.76px;">&nbsp;0000 0000 0000</span></p>

<div>이 됩니다. 갑자기 47번 비트가 1이 되는 순간에 그 위 63번 비트까지 1로 바뀌었습니다.</div>

<div>그런 주소 표기를 Canonical address space라고 부릅니다. 현재 이런 주소 표기를&nbsp;표준으로 약속했다는 의미입니다. 그냥 64비트 전체를 주소로 썼으면 표준이니 약속이니 할 필요가 없습니다. 뭔가 이상한 제약이 있으니 그걸 따라야되고 그러니 그걸 표준이라는 이름으로 정해서 있어보이게 만든 것이지요.</div>

<div>
<p style="font-size: 13.2px; line-height: 23.76px;">1111 1111 1111 1111 1000<span style="font-size: 13.2px; line-height: 23.76px;">&nbsp;0000 0000 0000&nbsp;0000 0000 0000 0000 0000</span><span style="font-size: 13.2px; line-height: 23.76px;">&nbsp;0000 0000 0001</span></p>

<div>이제 다시 1부터 증가됩니다.&nbsp;전체 비트가 다 1이 될때까지 계속 증가됩니다.</div>

<div>현재 리눅스등의 운영체제들은 이런 특징을 이용해서 0 ~ 0x0000 7FFF FFFF FFFF를 유저 영역, 0xFFFF 8000 0000 0000 ~ 0xFFFF FFFF FFFF FFFF를 커널 영역으로 정해서 사용하고 있습니다. 만약 프로그램이나 커널 드라이버가 버그로 그 중간영역을 접근하면 문제가 발생했다는 것을 바로 알아차릴 수 있게 되니까 편리해집니다. 32비트에서는 0xc000 0000 이후를 커널 영역으로 지정했었는데 커널의 주소 공간이 1G밖에 안되서 이걸 늘리기위해 HIGHMEM, FIXED MAPPING이니 하는 이상한 기법들이 등장했었습니다. 64비트가 되면 그런 제약이 없어졌습니다. 지금은 디렉토리 이름이 x86으로 통일되었지만 예전에 디렉토리 이름이 AMD64로 나왔을 때&nbsp;커널의 주소 관리 코드가 얼마나 간단해졌는지 보고 너무나 기뻤었습니다.</div>

<div>제가 이 Canonical address space를 설명하는 이유는 만약 어플리케이션 프로그램을 짜고 있는데 어떤 주소값이 0x7FFF FFFF FFFF보다 크다면 무조건 잘못된 코드라는 것을 말씀드리기 위해서입니다. 커널 드라이버를 짜는데 주소값이 0xFFFF 8000 0000 0000보다 작다면 뭔가가 잘못된 것입니다.</div>

<div>어플리케이션은 0x0 ~ 0x7FFF FFFF FFFF 영역내에서 또 STACK, BSS, DATA, TEXT 등으로&nbsp;영역을 나눠서 각각의 주소 범위가 있습니다. 그 실제 값은 운영체제마다 다릅니다. 만약 문제가 생겼다면&nbsp;주소값들이 해당하는 영역에 있지 않는지를 확인해야합니다. rsp 값이 스택영역에 있는게 맞나, rip 값이 텍스트 영역에 있는게 맞나를 gdb로 확인해야한다는 것이지요.</div>
</div>
</div>

<div>&nbsp;</div>
</div>

<p>&nbsp;</p>
						</div>

						</article>
					<div id="social_group">
						<ul>
							<li id="facebook_like"><div class="fb-like" data-send="true" data-layout="button_count" data-width="450" data-height="20" data-show-faces="false"></div></li>
							<li id="readit">
								<a class="marking" href="#" data-mark-id="0"><span class="action">봤어요</span> (<span class="count">0</span>명)</a>
							</li>
							<li id="topic_navigator">
								<ul>
									<li class="prev"><a href="http://opentutorials.org/module/2004/11712">이전</a></li><li class="next"><a href="http://opentutorials.org/module/2004/11702">다음</a></li>
								</ul>
							</li>
						</ul>
					</div>

					<div id="fb-root"></div>
					<script>
						(function(d, s, id) {
							var js, fjs = d.getElementsByTagName(s)[0];
							if (d.getElementById(id)) return;
							js = d.createElement(s); js.id = id;
							js.src = "//connect.facebook.net/ko_KR/all.js#xfbml=1";
							js.async = true;
							fjs.parentNode.insertBefore(js, fjs);
						}(document, 'script', 'facebook-jssdk'));

						function doMarking() {
							var marker = $('#social_group a.marking');
							var markType = marker.hasClass('marked') ? 'unmark' : 'marking';
							ga('send', 'event', 'Participation', 'mark_'+markType, path_context+(topic_id ? '/'+topic_id : '')+', '+document.title , {useBeacon:true});
							$.ajax({
								url: "http://opentutorials.org/module/2004/11699/marking_ajax",
								data: {'type':'saw', 'marktype':markType, 'mark_id':marker.data('mark-id')},
								type: 'post',
								dataType: 'json',
								success: function (response) {
									if (response.result) {
										if (response.data.status == 'unmarked'){
											marker.removeClass('marked');
											marker.find('span.action').html("봤어요");
											var count = Number(marker.find('span.count').text());
											marker.find('span.count').text(count - 1);
										} else {
											marker.addClass('marked');
											marker.find('span.action').html("봤어요 취소");
											var count = Number(marker.find('span.count').text());
											marker.find('span.count').text(count + 1);
										}

										marker.data('mark-id', response.data.id);
									} else {
										if (response.errorCode == 1) {
											var dialog = LoginDialogManager.get();
											dialog.show(true);
										} else {
											xalert(NULL, response.msg, {modal:true});
										}
									}
								}
							})
						}

						function handleMarking(event) {
							event.preventDefault();
							doMarking();
						}

						$('#readit a.marking').click(handleMarking);
					</script>
<div id="comment" data-role="collapsible">
	<h3>댓글</h3>

	<form id="comment_new_form" method="post" action="http://opentutorials.org/comment/add_ajax" data-ajax="true">
		<div class="profile_image">
			<img src="https://s3-ap-northeast-2.amazonaws.com/opentutorials-user-file/avatar/40/9992.png" alt="">
		</div>

		<div class="form_wrapper">
			<dl class="comment_form_content">
				<dt>댓글 본문</dt>
				<dd>
					<div id="reply_indicator">
						<a>리체님의 댓글에 대한 답글입니다.</a>
						<input type="hidden" name="parent" value="">
						<a class="btn btn_unchain" href="#">삭제</a>
					</div>
					<textarea name="cmt_content"></textarea>
				</dd>
			</dl>
			<div class="buttons">
				<input type="hidden" name="course_id" value="0">
				<input type="hidden" name="module_id" value="2004">
				<input type="hidden" name="topic_id" value="11699">

				<button type="submit"><span>댓글 올리기</span></button>
			</div>
		</div>
	</form>
	
	<ol id="comment_list">
		<li id="comment22750" data-id="22750">
			<div class="profile_image">
				<img class="profile_icon" data-id="0" src="/static/img/common/40_profile.png" alt="">
			</div>


			<div class="name time">
				<strong>감사합니다.</strong><a href="#comment22750" name="comment22750"><time datetime="2016-02-22 16:44:31">2개월 전</time></a>
			</div>

			<div class="comment_content">
				1. Canonical address space에 대해서 알게 되었네요.<br />
2. 64비트라고 할지라도 실제 사용은 48비트(256TB)까지 가능하군요.<br />
<br />
감사합니다.			</div>

			<div class="buttons">
				<a class="icon block reply" href="#"><span class="ico ico_reply"></span> 답글</a> <a class="icon block delete" href="#"><span class="ico ico_close"></span> 삭제</a>
			</div>
		</li>
	</ol>

	<div id="cmt_more" class="hidden">
		<a href="#"><span>더 보기</span></a>
	</div>
</div>					</div>
					<div style="clear: both"></div>
				
<div class="revision-control layerbox">
	<div class="pin pin_big_right"></div>
	<div class="wrapper table">
		<hgroup class="head">
			버전 관리
			<button class="btn_close"><span>닫기</span></button>
		</hgroup>
		
		<div class="layout scrollbox">
			<table class="select">
				<tbody>
					<tr data-value="0" class="current">
						<td class="updated"><time>2016-02-16 21:51:04</time></td>
						<td class="user">gurugio</td>
					</tr>
				</tbody>
			</table>
		</div>

		<div class="selected">
			<table>
				<tbody>
					<tr class="current">
						<th class="name">현재 버전</th>
						<td class="datetime"><time>2016-02-16 21:51:04</time></td>
					</tr>
					<tr class="selected">
						<th class="name">선택 버전</th>
						<td class="datetime"><time id="selected-revision"></time></td>
					</tr>
				</tbody>
			</table>
		</div>
		
		<div class="btns">
			<button class="btn_small restore" disabled>선택한 버전으로 복원</button>
			<input type="checkbox" name="compare" id="compare" checked="checked" disabled/><label for="compare">버전 비교</label>
		</div>
	</div>
</div>
				
					<div id="footer">
						<a href="http://opentutorials.org/home/viewmode_mobile?returnURL=http%3A%2F%2Fopentutorials.org%2Fmodule%2F2004%2F11699">모바일 버전</a>
					</div>

					<div class="clear"></div>
				</div>
			</div>
		</div>
	</div>

	<div id="author_balloon">
		<div class="box">
			<img class="avatar" src="http://opentutorials.org/static/img/common/blank.gif" alt="" style="background-image: none">
		</div>

		<div class="header">
			<strong>graphittie</strong>
			<a href="#">자세히 보기</a>
		</div>

		<div class="body">
			<ul id="statistics">
				<li class="topic"><span class="text"><i></i>토픽</span> <span class="count">0</span></li>
				<li class="module"><span class="text"><i></i>모듈</span> <span class="count">0</span></li>
				<li class="course"><span class="text"><i></i>코스</span> <span class="count">0</span></li>
				<li class="readit"><span class="text"><i></i>봤어요</span> <span class="count">0</span></li>
				<li class="comment"><span class="text"><i></i>댓글</span> <span class="count">0</span></li>
				<li class="hof"><span class="text"><i></i>명예의 전당</span> <span class="count">0</span></li>
			</ul>
		</div>
	</div>

	<div id="holder">

	</div>

<script src="/static/js/desktop/comment.js?1"></script>
<script src="/static/js/desktop/script.js?1"></script>
	<script>
		if (DOMLoader.callbacks.length) {
			for (var i=0, max=DOMLoader.callbacks.length; i<max; i++)
				DOMLoader.callbacks[i]();
		}

	</script>
	<script>
	if(window.google_analytics_page_set_object) {
		ga('set', google_analytics_page_set_object);
	};
	if(ga) {
		ga('send', 'pageview');
	}
</script>
</body>
</html>
